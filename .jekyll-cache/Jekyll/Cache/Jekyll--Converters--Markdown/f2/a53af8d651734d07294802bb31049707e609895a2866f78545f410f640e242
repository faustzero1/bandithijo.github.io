I"±<!-- BANNER OF THE POST -->
<!-- <img class="post&#45;body&#45;img" src="/assets/img/logo/logo_blank_banner.svg" data&#45;echo="#" alt="banner"> -->

<div class="blockquote-red">
<div class="blockquote-red-title">[ ! ] Perhatian</div>
<p>Lakukan <i>backup</i> data sebelum melakukan proses di bawah.</p>
<p>Segala bentuk kerugian, seperti kehilangan data maupun rusaknya perangkat yang kalian gunakan, bukan merupakan tanggung jawab penulis.</p>
<p><i>Do with Your Own Risk!</i></p>
</div>

<h1 id="prakata">Prakata</h1>

<p>Sudah merupakan sebuah keharusan sebagai <em>system administrator</em> untuk menerapkan penggantian <em>password</em> secara berkala.</p>

<p>Kedengarannya memang aneh kalau laptop pribadi sering berganti-ganti <em>password</em> secara berkala.</p>

<p>Saya adalah salah satu dari orang yang aneh tersebut.</p>

<p>Alasannya bukan karena menerapkan jadwal khusus untuk berganti <em>password</em> secara berkala, namun karena seringnya berkontribusi dalam menjawab pertanyaan teman-teman pada group Telegram, yang terkadang perlu untuk menampilkan demonstrasi berupa video dengan menampilkan <em>screenkey</em>. Hal ini menyebabkan <em>password</em> user saya terekspose karena saya lupa untuk menonaktifkannya.</p>

<h1 id="permasalahanan">Permasalahanan</h1>

<p>Karena Home direktori saya adalah direktori yang terenkripsi (menggunakan eCryptfs), disinilah letak tantangannya. Karena tentu saja prosedur untuk mengganti <em>password</em> menjadi tidak biasa.</p>

<p>Teman-teman dapat melihat catatan proses enkripsi Home direktori yang saya lakukan di sini, ‚Äú<a href="http://0.0.0.0:4000/blog/mengenkripsi-home-direktori-pada-gnu-linux" target="_blank">Mengenkripsi Home Direktori pada GNU/Linux</a>‚Äù.</p>

<h1 id="pemecahan-masalah">Pemecahan Masalah</h1>

<p>Setelah saya melakukan <em>research</em> kecil-kecilan, ternyata proses penggantian <em>password</em> pada Home direktori yang terenkripsi menggunakan eCryptfs tidaklah begitu sulit.</p>

<p>Saya akan bagi dalam dua langkah, agar lebih mudah untuk dipahami.</p>

<ol>
  <li>Mengganti <em>password</em> Home direktori yang terenkripsi dengan eCryptfs</li>
  <li>Mengganti <em>password</em> username</li>
</ol>

<p>Langkah di atas, memang tidak harus berurutan, namun saya merekomendasikan untuk mengerjakan tahap pertama lebih dahulu.</p>

<h2 id="mengganti-password-home-direktori-terenkripsi">Mengganti Password Home Direktori Terenkripsi</h2>

<p>Memang kita dapat melakukannya pada <em>user</em> yang sedang kita aktif (<em>active session</em>).</p>

<p>Di awal saya mencoba pun, saya menggunakan <em>user</em> yang sedang aktif.</p>

<p>Namun, <strong>saya sangat merekomendasikan untuk <em>logout</em> terlebh dahulu, dan menggunakan akun root</strong>.</p>

<ol>
  <li>
    <p><em>Logout</em> terlebih dahulu.</p>
  </li>
  <li>
    <p>Masuk ke TTY shell. Bisa TTY2 - TTY6. Pilih saja yang kosong.</p>

    <p>Dengan cara <kbd>CTRL</kbd>+<kbd>ALT</kbd>+<kbd>F2</kbd> untuk TTY2</p>
  </li>
  <li>
    <p>Login dengan <strong>root</strong>.</p>
  </li>
  <li>
    <p>Jalankan perintah di bawah ini untuk mengganti <em>password</em> Home direktori yang terenkripsi dengan eCryptfs.</p>

    <pre>
# ecryptfs-rewrap-passphrase /home/.ecryptfs/<mark>bandithijo</mark>/.ecryptfs/wrapped-passphrase</pre>

    <p>Jangan lupa mengganti <mark>bandithijo</mark>, dengan username yang teman-teman gunakan.</p>

    <p>Apabila berhasil, akan mengeluarkan <em>output</em> seperti di bawah ini.</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Old wrapping passphrase: _
</code></pre></div>    </div>

    <p>Masukkan Terlebih dahulu <em>password</em> lama, kemudian baru dua kali <em>password</em> baru.</p>
  </li>
  <li>
    <p>Dengan begini, proses mengganti <em>passphrase</em> dari Home direktori yang terenkripsi dengan eCryptfs telah selesai.</p>

    <p><strong>Jangan <em>logout</em> dulu, karena kita akan lanjut ke tahap berikutnya</strong>.</p>
  </li>
</ol>

<h2 id="mengganti-password-user">Mengganti Password User</h2>

<p>Setelah sebelumnya kita berhasil mengganti <em>passphrase</em>/<em>password</em> dari Home direktori, langkah selanjutnya, kita akan mengganti <em>password</em> dari user yang kita gunakan.</p>

<p>Ini penting mengingat cara kerja dekripsi dari Home direktori menggunakan eCryptfs adalah dengan memanfaatkan PAM, maka kita perlu menyamakan <em>password</em> user dengna <em>passphrase</em> untuk dekripsi Home direktori.</p>

<p>Caranya tentu saja sudah sangat familiar.</p>

<pre>
# passwd <mark>bandithijo</mark>
</pre>

<p>Jangan lupa mengganti <mark>bandithijo</mark> dengan username kalian.</p>

<p>Dengan begini tahapan mengganti <em>password</em> user dari Home direktori yang terenkripsi telah selesai.</p>

<p>Lakukan pengujian, apakah kalian bisa masuk ke desktop, dan lihat apakah Home direktori berhasil di-dekripsi secara otomatis.</p>

<h1 id="pesan-penulis">Pesan Penulis</h1>

<p>Tulisan ini bukan merupakan tandingan dari dokumentasi eCryptfs. Silahkan merujuk pada dokumentasi eCryptfs resmi yang sudah saya sertakan pada bagian referensi di bawah.</p>

<p>Dapat pula teman-teman yang menggunakan Arch Linux, merujuk pada Arch Wiki eCryptfs yang sudah saya sertakan di bawah.</p>

<p>Sepertinya seperti ini saja.</p>

<p>Terima Kasih.</p>

<h1 id="referensi">Referensi</h1>

<ol>
  <li><a href="https://wiki.archlinux.org/index.php/ECryptfs#Mounting_2" target="_blank">wiki.archlinux.org/index.php/ECryptfs#Mounting_2</a>
<br />Diakses tanggal: 2019/06/17</li>
</ol>

:ET