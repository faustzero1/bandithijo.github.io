I"¯*<p><img class="post-body-img" src="/assets/img/logo/logo_blank_banner.svg" data-echo="https://2.bp.blogspot.com/-ivgbZvKVSI4/WmBTWBAqElI/AAAAAAAAG4g/QKm653CH2nQ89IabEC5hkfDd8kF1QFbtQCLcBGAs/s1600/Default%2BHeader%2BTemplate%2BPost%2B2X.png" alt="banner" /></p>

<h1 id="latar-belakang">Latar Belakang</h1>
<p>Untuk dapat menggunakan <em>fingerprint scanner</em>, terlebih dahulu kalian harus memastikan apakah tipe dari <em>fingerprint scanner</em> yang kalian miliki telah didukung atau tidak. Kalian dapat melakukan pengecekan dengan mengunjungi link berikut ini: <a href="https://www.freedesktop.org/wiki/Software/fprint/libfprint/Supported_devices/" target="_blank">libfprint_supported_devices</a>.</p>

<p><em>FingerPrint scanner</em> dapat digunakan secara <em>plug and play</em> pada Arch Linux (dan beberapa distro tertentu yang saya sudah coba seperti Fedora) diatur oleh <em>fprint project</em>. Idenya adalah untuk membuat <em>built-in fingerprint scanner</em> pada beberapa jenis laptop dapat melakukan <em>login</em> dengan memanfaatkan <a href="https://wiki.archlinux.org/index.php/PAM" target="_blank">PAM</a> (<em>Pluggable Authentication Modules</em>).</p>

<h1 id="prasyarat">Prasyarat</h1>
<p>Untuk mengetahui tipe dan <em>brand</em> dari <em>fingerprint scanner</em> yang kalian miliki, gunakan <em>command</em> berikut ini,</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ lsusb
</code></pre></div></div>
<pre>
Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
<mark>Bus 001 Device 004: ID 138a:0017 Validity Sensors, Inc. VFS 5011 fingerprint sensor</mark>
Bus 001 Device 003: ID 04f2:b52c Chicony Electronics Co., Ltd
Bus 001 Device 005: ID 046d:c52b Logitech, Inc. Unifying Receiver
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</pre>
<p>Dari keterangan di atas dapat terlihat bahwa <em>fingerprint</em> saya ada pada baris kedua.</p>

<h1 id="instalasi">Instalasi</h1>
<p>Untuk dapat menggunakan <em>fingerprint scanner</em>, kalian membutuhkan paket bernama <a href="https://www.archlinux.org/packages/?name=fprintd" target="_blank">fprintd</a>. Mungkin beberapa paket lain seperti <a href="https://www.archlinux.org/packages/?name=imagemagick" target="_blank">imagemagick</a> juga akan diperlukan sebagai dependensi.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo pacman -S fprintd
</code></pre></div></div>

<h1 id="konfigurasi">Konfigurasi</h1>
<p>Setelah melakukan instalasi paket fprintd, lantas kita perlu melakukan beberapa konfigurasi. Kalian dapat memilih konfigurasi-konfigurasi apa saja yang kalian perlukan dari beberapa konfigurasi yang saya lakukan di bawah ini. Tidak harus semua dilakukan, pilih saja yang kalian butuhkan.</p>

<h2 id="login">Login</h2>
<p>Untuk kalian yang menggunakan Gnome 3.26, <em>login manager</em> diatur oleh GDM. Apabila kalian ingin menggunakan <em>fingerprint scanner</em> untuk <em>login</em> pada GDM, kalian dapat mengikuti langkah ini. Gnome sudah menyediakan <em>fingerprint option</em> yang dapat kalian atur pada <strong>Settings &gt; Details &gt; Users</strong>. Kalian akan melihat window seperti di bawah ini,</p>

<p><img src="/assets/img/logo/logo_blank.svg" alt="gambar_1" data-echo="https://2.bp.blogspot.com/-QCKqPEIkctA/WmBdqy0o-kI/AAAAAAAAG4w/39ie3sVWaCA7Cn5U0Mkmwbk2lhNE3TiHwCLcBGAs/s1600/gambar_1.png" /></p>
<p class="img-caption">Gambar 1 - Settings &gt; Details &gt; Users</p>

<p>Kalian dapat melihat pada Gambar 1, terdapat <em>Fingerprint Login option</em> dengan nilai â€œ<em>Enabled</em>â€. Bagi teman-teman yang belum melakukan konfigurasi maka akan tertulis â€œ<em>Disabled</em>â€.</p>

<p>Untuk dapat mengaktifkan <em>fingerprint login</em>, kalian perlu membuka kunci dari Settings dengan meng-klik tombol â€œ<em>Unlock</em>â€ yang terdapat pada <em>top bar window Settings</em> terlebih dahulu. Kemudian pilih <em>Fingerprint Login</em>, dan ikuti petunjuk untuk melakukan <em>enroll</em> terhadap sidik jari kalian.</p>

<blockquote>
  <p class="title-quote"> [ ! ] Perhatian </p>
  <p>Apabila fingerprint option tidak terdapat pada menu Settings, kalian dapat menambahkan username kalian ke dalam input group. Dengan cara,</p>

  <p><code>$ sudo usermod -aG input <mark>username</mark></code></p>

  <p>Ganti username dengan nama username kalian.</p>
</blockquote>

<blockquote>
  <p class="title-quote">Apakah penulis juga menggunakan fingerprint scanner saat login ?</p>
  <p>Saya sendiri, menggunakan LightDM untuk login kedalam i3wm, dan saya tidak mengatur option fingerprint scanner untuk login ke dalam sistem. Karena alasan tertentu yang berhubungan dengan dekripsi direktori tertentu pada sistem, saya memilih untuk memasukkan password secara manual.</p>

  <p>Lagipula memasukkan password pada login manager juga tidak sering kita lakukan seperti halnya memasukkan password sudo atau permission yang lainnnya. Maka dari itu saya teteap memilih untuk memasukkan password login secara manual. Hehehe</p>
</blockquote>

<h2 id="membuat-fingerprint-signature-secara-manual">Membuat Fingerprint Signature secara Manual</h2>
<p>Bagi teman-teman yang tidak menggunakan Gnome seperti di atas, Ada 2 cara untuk membuat <em>signature</em> sidik jari kalian, yaitu dengan <em>signature</em> hanya 1 jari dan <em>signature</em> dengan semua jari (banyak jari).</p>

<p>Untuk menambahkan <em>signature</em> 1 jari,</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ fprintd-enroll
</code></pre></div></div>
<p>Atau, dengan membuat baru <em>signature</em> untuk semua jari, namun terlebih dahulu kita perlu menghapus <em>signature</em> yang sudah kita buat sebelumnya,</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ fprintd-delete username
</code></pre></div></div>
<p>*Ganti <code class="highlighter-rouge">username</code> dengan nama <em>username</em> kamu.</p>

<p>Selanjutnya, langkah memasukkan <em>signature</em> untuk semua jari,</p>
<pre>
$ for finger in {left,right}-{thumb,{index,middle,ring,little}-finger}; do fprintd-enroll -f $finger <mark>username</mark>; done
</pre>
<p>*Ganti <code class="highlighter-rouge">username</code> dengan nama username kamu.</p>

<p>Kemudian, kalian akan diminta memasukkan 10 sidik jari dengan masing-masing 5x scan setiap jari.</p>

<h2 id="mengamankan-fingerprint-signature">Mengamankan FingerPrint Signature</h2>
<p>Secara <em>default</em>, hasil <em>enroll</em> dari <em>fingerprint scanner</em> yang sudah kita buat dapat dengan mudah ditimpa dengan yang baru atau dihapus dengan perintah <code class="highlighter-rouge">$ fprintd-delete</code>, tanpa perlu terlebih dahulu menggunakan <code class="highlighter-rouge">sudo</code> <em>permission</em>. Kalian dapat mengubah aturan ini dengan memanfaatkan pengaturan pada <em>Polkit rules</em>.</p>

<p>Kita akan membuat file baru pada <code class="highlighter-rouge">/etc/polkit-1/rules.d/</code> dengan isi hanya <em>superuser</em> yang dapat melakukan perubahan pada <em>fingerprint signature</em>.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo vim /etc/polkit-1/rules.d/50-net.reactivated.fprint.device.enroll.rules
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>polkit.addRule(function (action, subject) {
    if (action.id == "net.reactivated.fprint.device.enroll") {
        return subject.user == "root" ? polkit.Result.YES : polkit.result.NO
    }
})
</code></pre></div></div>
<p>Sekarang, untuk melakukan <em>enroll fingerprint</em> harus membutuhkan <em>sudo permission</em> terlebih dahulu.</p>

<h3 id="pam">PAM</h3>
<p>Untuk menggunakan <em>fingerprint scanner</em> pada saat Terminal meminta kita memasukan <em>password sudo</em>, atau saat sistem meminta kita memasukkan <em>password Polkit</em>, kita perlu mengedit dan melakukan penambahan beberapa baris perintah pada isi dari file-file yang terdapat pada direktori <code class="highlighter-rouge">/etc/pam.d/</code> berikut ini.</p>

<h3 id="sudo">Sudo</h3>
<p>Untuk menggunakan <em>fingerprint</em> pada saat menggunakan <code class="highlighter-rouge">sudo</code>,</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo vim /etc/pam.d/sudo
</code></pre></div></div>
<pre>
#%PAM-1.0

<mark>auth    required    pam_env.so
auth    sufficient  pam_fprintd.so
auth    sufficient  pam_unix.so  try_first_pass likeauth nullok
auth    required    pam_deny.so</mark>

auth     include    system-auth
account  include    system-auth
session  include    system-auth

</pre>
<p>Letakkan pada bagian atas dari aturan (<em>rules</em>) yang sudah ada sebelumnya.</p>

<p>Tujuannya agar kita diminta untuk memasukkan <em>fingerprint</em> terlebih dahulu, apabila gagal, maka akan dilanjutkan dengan inputan sudo password.</p>

<h3 id="polkit">Polkit</h3>
<p>Untuk menggunakan <em>fingerprint</em> pada saat ada aplikasi GUI yang membutuhkan akses <em>superuser</em> dengan bantuan <em>Polkit</em>,</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo vim /etc/pam.d/polkit-1
</code></pre></div></div>
<pre>
#%PAM-1.0

<mark>auth      sufficient  pam_fprintd.so</mark>
auth      include     system-auth
account   include     system-auth
password  include     system-auth
session   include     system-auth
</pre>
<p>Tambahkan seperti yang tertulis pada line ke-3.</p>

<p><code class="highlighter-rouge">auth sufficient pam_fprintd.so</code>.</p>

<h3 id="i3lock">i3lock</h3>
<p>Untuk membuka i3lock dengan menggunakan <em>fingerprint scanner</em>,</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo vim /etc/pam.d/i3lock
</code></pre></div></div>
<pre>
#
# PAM configuration file for the i3lock screen locker. By default, it includes
# the 'system-auth' configuration file (see /etc/pam.d/login)
#

#auth  include     system-auth

<mark>auth   required    pam_env.so
auth   sufficient  pam_unix.so    try_first_pass likeauth nullok
auth   sufficient  pam_fprintd.so</mark>
</pre>
<p>*Disable isi sebelumnya dengan menambahkan tanda <code class="highlighter-rouge">#</code> pada awal baris, kemudian tambahkan 3 baris di bawahnya, seperti contoh di atas.</p>

<p>Untuk dapat menggunakannya, saat i3lock sudah aktif, terlebih dahulu kita harus menekan tombol <kbd>Enter</kbd>, maka <em>fingerprint scanner</em> akan aktif, kemudian <em>unlock</em> i3lock dengan melakukan <em>enroll fingerprint</em>.</p>

<h1 id="referensi">Referensi</h1>
<ol>
  <li><a href="https://wiki.archlinux.org/index.php/Fprint">wiki.archlinux.org/index.php/Fprint</a>
<br />Diakses tanggal: 2018/01/18</li>
  <li><a href="https://bbs.archlinux.org/viewtopic.php?id=176181">bbs.archlinux.org/viewtopic.php?id=176181</a>
<br />Diakses tanggal: 2018/01/18</li>
</ol>
:ET