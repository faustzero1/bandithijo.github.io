I"•P<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wernight/powerline-web-fonts@ba4426cb0c0b05eb6cb342c7719776a41e1f2114/PowerlineFonts.css" />

<!-- BANNER OF THE POST -->
<!-- <img class="post&#45;body&#45;img" src="/assets/img/logo/logo_blank_banner.svg" data&#45;echo="#" alt="banner"> -->

<h1 id="latar-belakang-masalah">Latar Belakang Masalah</h1>

<p>Malam tadi, 2019/01/25, tiba-tiba saja saya merasa Vim (teks editor favorit saya) terasa lambat sekali saat proses <em>startup</em>.</p>

<p>Saya dapat menyadari kejanggalan ini karena reflek saya setiap sehabis menjalankan perintah <span class="nobr"><code class="highlighter-rouge">$ vim nama_file</code></span> selalu menekan tombol <kbd>J</kbd>. Secara bersamaan, <em>cursor line</em> yang terdapat di dalam Vim sama sekali tidak bergerak.</p>

<p>Setelah saya amati, statusline yang dihandle oleh <code class="highlighter-rouge">vim-airline</code> mengalami delay saat proses <em>startup</em> ini.</p>

<p>Coba perhatikan perbandingan Vim pada user biasa dan pada user root di bawah ini.</p>

<!-- IMAGE CAPTION -->
<p><img src="/assets/img/logo/logo_blank.svg" alt="gambar_1" data-echo="https://i.postimg.cc/JzcBJfsM/gambar-01.gif" /></p>
<p class="img-caption">Gambar 1 - Perbandingan startup Vim pada root dan Vim pada user</p>

<p>Sisi kanan adalah Vim pada user biasa, perhatikan delay yang terjadi pada Vim-Airline saat proses <em>startup</em> berlangsung. Bandingkan dengan sisi kiri, yaitu Vim pada root.</p>

<p><strong>User biasa</strong>Â : Statusline terlambat keluar setelah bufferline</p>

<p><strong>User root</strong>Â Â : Statusline berbarengan keluar bersama bufferline</p>

<p>Delay yang dialami oleh statusline pada proses <em>startup</em> ini dapat semakin molor apabila file yang dibuka memiliki baris yang panjang dan belum terdapat <em>cache</em> atau ada kondisi lain lagi (belum dapat memastikan).</p>

<p>Karena alasan tersebut saya memutuskan untuk memigrasikan <code class="highlighter-rouge">vim-airline</code> dan mencari alternatif statusline yang lain.</p>

<h1 id="pemecahan-masalah">Pemecahan Masalah</h1>

<p>Setelah mencoba beberapa statusline, pilihan saya jatuh pada <a href="https://github.com/itchyny/lightline.vim" target="_blank"><strong>itchyny/lightline</strong></a>.</p>

<p>Dan untuk menghandle bufferline, saya menggunakan <a href="https://github.com/mengelbrecht/lightline-bufferline" target="_blank"><strong>mengelbrecht/lightline-bufferline</strong></a>.</p>

<p>Berikut ini adalah gambar perbandingan tampilan antara <strong>Vim-Airline</strong> versus <strong>Lightline</strong> dan <strong>Lightline-Bufferline</strong>.</p>

<!-- IMAGE CAPTION -->
<p><img src="/assets/img/logo/logo_blank.svg" alt="gambar_2" data-echo="https://i.postimg.cc/05dcfybJ/gambar-02.png" /></p>
<p class="img-caption">Gambar 2 - Vim-Airline (Kiri), Lightline (Kanan)</p>

<!-- IMAGE CAPTION -->
<p><img src="/assets/img/logo/logo_blank.svg" alt="gambar_7" data-echo="https://i.postimg.cc/wB5t1V5t/gambar-07.gif" /></p>
<p class="img-caption">Gambar 3 - Startup dengan Vim-Airline</p>

<!-- IMAGE CAPTION -->
<p><img src="/assets/img/logo/logo_blank.svg" alt="gambar_8" data-echo="https://i.postimg.cc/j5sDP7vM/gambar-08.gif" /></p>
<p class="img-caption">Gambar 4 - Startup dengan Lightline</p>

<!-- IMAGE CAPTION -->
<p><img src="/assets/img/logo/logo_blank.svg" alt="gambar_5" data-echo="https://i.postimg.cc/2SDs8SVk/gambar-05.png" /></p>
<p class="img-caption">Gambar 5 - Vim-Airline</p>

<!-- IMAGE CAPTION -->
<p><img src="/assets/img/logo/logo_blank.svg" alt="gambar_6" data-echo="https://i.postimg.cc/52SZHWCw/gambar-06.png" /></p>
<p class="img-caption">Gambar 6 - Lightline</p>

<h1 id="instalasi">Instalasi</h1>

<p>Saya menggunakan plugin manager <a href="https://github.com/junegunn/vim-plug" target="_blank"><strong>vim-plug</strong></a>.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Plug 'itchyny/lightline.vim'
Plug 'mengelbrecht/lightline-bufferline'
</code></pre></div></div>

<h1 id="konfigurasi">Konfigurasi</h1>

<h2 id="lightline">Lightline</h2>

<p>Pada konfigurasi <code class="highlighter-rouge">lightline</code> ini saya hanya menambahkan:</p>
<ol>
  <li>Colorscheme</li>
  <li>Menampilkan <code class="highlighter-rouge">git-branch</code> (membutuhkan <a href="https://github.com/tpope/vim-fugitive" target="_blank"><code class="highlighter-rouge">vim-fugitive</code></a>)</li>
  <li>Menggunakan simbol <code class="highlighter-rouge">powerline</code></li>
  <li>Menambahkan konfigurasi buffer dengan menggunakan <a href="https://github.com/mengelbrecht/lightline-bufferline" target="_blank"><code class="highlighter-rouge">lightline-bufferline</code></a></li>
  <li>Mengkostumisasi tabline sebelah kiri (atas)</li>
</ol>

<p>Tambahkan konfigurasi di bawah pada <code class="highlighter-rouge">~/.vimrc</code>.</p>

<div class="language-viml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">g:lightline</span> <span class="p">=</span> <span class="p">{</span>
<span class="se">\</span>   <span class="s1">'colorscheme'</span><span class="p">:</span> <span class="s1">'solarized'</span><span class="p">,</span>
<span class="se">\</span>   <span class="s1">'active'</span><span class="p">:</span> <span class="p">{</span>
<span class="se">\</span>     <span class="s1">'left'</span><span class="p">:[[</span> <span class="s1">'mode'</span><span class="p">,</span> <span class="s1">'paste'</span> <span class="p">],</span>
<span class="se">\</span>             <span class="p">[</span> <span class="s1">'gitbranch'</span><span class="p">,</span> <span class="s1">'readonly'</span><span class="p">,</span> <span class="s1">'filename'</span><span class="p">,</span> <span class="s1">'modified'</span> <span class="p">]]</span>
<span class="se">\</span>   <span class="p">},</span>
<span class="se">\</span>   <span class="s1">'component'</span><span class="p">:</span> <span class="p">{</span>
<span class="se">\</span>     <span class="s1">'lineinfo'</span><span class="p">:</span> <span class="s1">'î‚¡ %3l:%-2v'</span><span class="p">,</span>
<span class="se">\</span>   <span class="p">},</span>
<span class="se">\</span>   <span class="s1">'component_function'</span><span class="p">:</span> <span class="p">{</span>
<span class="se">\</span>     <span class="s1">'gitbranch'</span><span class="p">:</span> <span class="s1">'fugitive#head'</span><span class="p">,</span>
<span class="se">\</span>   <span class="p">}</span>
<span class="se">\</span><span class="p">}</span>
<span class="k">let</span> <span class="nv">g:lightline</span><span class="p">.</span>separator <span class="p">=</span> <span class="p">{</span>
<span class="se">\</span>   <span class="s1">'left'</span><span class="p">:</span> <span class="s1">'î‚°'</span><span class="p">,</span> <span class="s1">'right'</span><span class="p">:</span> <span class="s1">'î‚²'</span>
<span class="se">\</span><span class="p">}</span>
<span class="k">let</span> <span class="nv">g:lightline</span><span class="p">.</span>subseparator <span class="p">=</span> <span class="p">{</span>
<span class="se">\</span>   <span class="s1">'left'</span><span class="p">:</span> <span class="s1">'î‚±'</span><span class="p">,</span> <span class="s1">'right'</span><span class="p">:</span> <span class="s1">'î‚³'</span>
<span class="se">\</span><span class="p">}</span>
<span class="k">let</span> <span class="nv">g:lightline</span><span class="p">.</span>tabline <span class="p">=</span> <span class="p">{</span>
<span class="se">\</span>   <span class="s1">'left'</span><span class="p">:</span> <span class="p">[[</span><span class="s1">'buffers'</span><span class="p">]],</span>
<span class="se">\</span>   <span class="s1">'right'</span><span class="p">:</span> <span class="p">[[</span><span class="s1">'close'</span><span class="p">]]</span>
<span class="se">\</span><span class="p">}</span>
<span class="k">let</span> <span class="nv">g:lightline</span><span class="p">.</span>component_expand <span class="p">=</span> <span class="p">{</span>
<span class="se">\</span>   <span class="s1">'buffers'</span><span class="p">:</span> <span class="s1">'lightline#bufferline#buffers'</span>
<span class="se">\</span><span class="p">}</span>
<span class="k">let</span> <span class="nv">g:lightline</span><span class="p">.</span>component_type <span class="p">=</span> <span class="p">{</span>
<span class="se">\</span>   <span class="s1">'buffers'</span><span class="p">:</span> <span class="s1">'tabsel'</span>
<span class="se">\</span><span class="p">}</span>
</code></pre></div></div>

<!-- PERHATIAN -->
<div class="blockquote-red">
<div class="blockquote-red-title">[ ! ] Perhatian</div>
<p>Beberapa karakter <b>Powerline</b> mungkin mengalami gagal rendering pada Browser. Namun apabila dicopy-paste ke Terminal, tetap dapat ditampilkan dengan benar.</p>
<p>Apabila tidak berhasil, coba copy-paste secara manual output dari command di bawah ke dalam <code>.vimrc</code> di atas.</p>
<pre>
$ echo -e "\ue0a1 \ue0b0 \ue0b1 \ue0b2 \ue0b3"
</pre>
</div>

<p>Untuk melihat colorscheme dapat menggunakan <code class="highlighter-rouge">:h g:lightline.colorscheme</code>.</p>

<p>Berikut ini adalah daftar colorscheme yang tersedia:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Currently, wombat, solarized, powerline, jellybeans, Tomorrow,
Tomorrow_Night, Tomorrow_Night_Blue, Tomorrow_Night_Eighties,
PaperColor, seoul256, landscape, one, darcula, molokai, materia,
material, OldHope, nord, 16color and deus are available.
</code></pre></div></div>

<h2 id="lightline-bufferline">Lightline-Bufferline</h2>

<p>Buat apa kita perlu <code class="highlighter-rouge">Lightline-Bufferline</code> ?</p>

<p>Apabila kita hanya menggunakan <code class="highlighter-rouge">Lightline</code> saja, maka buffer yang terdapat di pojok kiri atas hanya akan ditampilkan satu buah. Karena ini, kita memerlukan <code class="highlighter-rouge">Lightline-Bufferline</code> untuk menampilkan buffer yang terbuka.</p>

<p>Untuk mengaktifkan bufferline (tabline), tambahkan di bawahnya.</p>
<div class="language-viml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">set</span> showtabline<span class="p">=</span><span class="m">2</span>  " Show tabline
<span class="k">set</span> guioptions<span class="p">-=</span><span class="k">e</span>  " Don'<span class="k">t</span> use GUI tabline
</code></pre></div></div>
<p>Kemudian tambahkan konfigurasi untuk <code class="highlighter-rouge">lightline-bufferline</code>, namun ini hanya optional saja, karena secara <em>default</em> tampilan dari <code class="highlighter-rouge">lightline-bufferline</code> sudah bagus.</p>

<p>Value yang saya gunakan hampir rata-rata adalah value <em>default</em> kecuali <code class="highlighter-rouge">unnamed</code> saya ganti menjadi <code class="highlighter-rouge">[NO NAME]</code>, defaultnya adalah <code class="highlighter-rouge">*</code>.</p>
<div class="language-viml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">g:lightline</span>#bufferline#unnamed <span class="p">=</span> <span class="s2">"[NO NAME]"</span>
<span class="k">let</span> <span class="nv">g:lightline</span>#bufferline#filename_modifier<span class="p">=</span> <span class="s2">":."</span>
<span class="k">let</span> <span class="nv">g:lightline</span>#bufferline#more_buffers <span class="p">=</span> <span class="s2">"..."</span>
<span class="k">let</span> <span class="nv">g:lightline</span>#bufferline#modified <span class="p">=</span> <span class="s2">" +"</span>
<span class="k">let</span> <span class="nv">g:lightline</span>#bufferline#read_only <span class="p">=</span> <span class="s2">" -"</span>
<span class="k">let</span> <span class="nv">g:lightline</span>#bufferline#shorten_path <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="nv">g:lightline</span>#bufferline#show_number <span class="p">=</span> <span class="m">0</span>
</code></pre></div></div>

<h1 id="modifikasi">Modifikasi</h1>

<p>Beberapa modifikasi yang saya lakukan adalah,</p>

<h2 id="colorscheme">Colorscheme</h2>

<p>Modifikasi terhadap <code class="highlighter-rouge">solarized</code> colorscheme, saya membuat cetak tebal pada mode dan beberapa bagian.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim .vim/plugged/lightline.vim/autoload/lightline/colorscheme/solarized.vim
</code></pre></div></div>
<pre>
...
let s:p.normal.left = [ [ s:base03, s:base1, <mark>'bold'</mark> ], [ s:base03, s:base00 ] ]
let s:p.normal.right = [ [ s:base03, s:base1, <mark>'bold'</mark> ], [ s:base03, s:base00 ] ]
let s:p.inactive.right = [ [ s:base03, s:base00 ], [ s:base0, s:base02 ] ]
let s:p.inactive.left =  [ [ s:base0, s:base02 ], [ s:base0, s:base02 ] ]
let s:p.insert.left = [ [ s:base03, s:yellow, <mark>'bold'</mark> ], [ s:base03, s:base00 ] ]
let s:p.replace.left = [ [ s:base03, s:red, <mark>'bold'</mark> ], [ s:base03, s:base00 ] ]
let s:p.visual.left = [ [ s:base03, s:green, <mark>'bold'</mark> ], [ s:base03, s:base00 ] ]
let s:p.normal.middle = [ [ s:base1, s:base02 ] ]
let s:p.inactive.middle = [ [ s:base01, s:base02 ] ]
let s:p.tabline.left = [ [ s:base03, s:base00, <mark>'bold'</mark> ] ]
let s:p.tabline.tabsel = [ [ s:base03, s:base1, <mark>'bold'</mark> ] ]
let s:p.tabline.middle = [ [ s:base0, s:base02 ] ]
let s:p.tabline.right = copy(s:p.normal.right)
let s:p.normal.error = [ [ s:base03, s:red, <mark>'bold'</mark> ] ]
let s:p.normal.warning = [ [ s:base03, s:yellow, <mark>'bold'</mark> ] ]
</pre>

<h2 id="tabline">Tabline</h2>

<p>Modifikasi yang saya lakukan adalah merubah dan menambah <strong>tabline</strong> sebelah kanan atas. Yang sebelumnya hanya menampilkan tanda <strong>X</strong>, saya rubah menjadi menampilkan <strong>BUFFERS</strong> dan <strong>BANDITHIJO.COM</strong>.</p>

<p>Terdapat 3 baris yang saya modifikasi.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim .vim/plugged/lightline.vim/autoload/lightline.vim
</code></pre></div></div>

<p><br />
<strong>Periksa pada line 97</strong>.</p>
<pre>
\   'tabline': {
\     'left': [['tabs']],
\     'right': <mark>[['string1'], ['string2']]</mark>
\   },
</pre>
<p>Saya merubah nilai <code class="highlighter-rouge">close</code> menjadi <code class="highlighter-rouge">string1</code> dan <code class="highlighter-rouge">string2</code>.</p>

<p><br />
<strong>Periksa pada line 109</strong>.</p>
<pre>
\     'lineinfo': '%3l:%-2v', 'line': '%l', 'column': '%c', <mark>'string1': '%999X BANDITHIJO.COM ', 'string2': '%999X BUFFERS '</mark>, 'winnr': '%{winnr()}'
</pre>
<p>Saya mengganti <code class="highlighter-rouge">'close': '%999X X'</code> menjadi seperti di atas.</p>

<p><br />
<strong>Perhatikan line 120</strong>.</p>
<pre>
\   'component_type': {
\     'tabs': 'tabsel', <mark>'string1': 'raw', 'string2': 'raw',</mark>
\   },
</pre>
<p>Saya mengganti <code class="highlighter-rouge">'close': 'raw'</code> menjadi seperti di atas.</p>

<p><br />
Setelah merubah 3 baris pada file <code class="highlighter-rouge">lightline.vim</code> di atas, <strong>jangan lupa mengganti nilai</strong> <code class="highlighter-rouge">'tabline'</code> pada bagian <code class="highlighter-rouge">'right':</code> yang ada pada <code class="highlighter-rouge">~/.vimrc</code>.</p>

<p>Ubah dari <code class="highlighter-rouge">close</code> menjadi <code class="highlighter-rouge">string1</code>, dan <code class="highlighter-rouge">string2</code>.</p>

<div class="language-viml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">g:lightline</span><span class="p">.</span>tabline <span class="p">=</span> <span class="p">{</span>
<span class="se">\</span>   <span class="s1">'left'</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="s1">'buffers'</span><span class="p">]</span> <span class="p">],</span>
<span class="se">\</span>   <span class="s1">'right'</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="s1">'string1'</span><span class="p">],</span> <span class="p">[</span><span class="s1">'string2'</span><span class="p">]</span> <span class="p">]</span>
<span class="se">\</span><span class="p">}</span>
</code></pre></div></div>

<h1 id="hasilnya">Hasilnya</h1>
<!-- IMAGE CAPTION -->
<p><img src="/assets/img/logo/logo_blank.svg" alt="gambar_7" data-echo="https://i.postimg.cc/TwHHXRWc/gambar-03.png" /></p>
<p class="img-caption">Gambar 7 - Lightline + Lightline-Bufferline</p>

<!-- IMAGE CAPTION -->
<p><img src="/assets/img/logo/logo_blank.svg" alt="gambar_8" data-echo="https://i.postimg.cc/yxfHSq5Q/gambar-04.png" /></p>
<p class="img-caption">Gambar 8 - Tampilan saat tidak sibuk</p>

<h1 id="tambahan-fugitive-readonly-dan-modified">Tambahan Fugitive, Readonly dan Modified</h1>

<p>Kita juga dapat menambahkan simbol untuk <strong>vim-fugitive</strong> dan <strong>readonly</strong> agar lebih mirip lagi dengan <strong>vim-airline</strong>.</p>

<p>Perhatikan baik-baik, saya melakukan modifikasi pada beberapa bagian. Bagian yang saya <em>marking</em> kuning adalah bagian-bagian yang saya modifikasi dari konfigurasi sebelumnya (di atas).</p>
<pre>
let g:lightline = {
\   'colorscheme': 'solarized',
\   'active': {
\     'left':[[ 'mode', 'paste' ],
\             [ '<mark>fugitive</mark>', 'readonly', 'filename', 'modified' ]]
\   },
\   'component': {
\     'lineinfo': 'î‚¡ %3l:%-2v',
\   },
\   'component_function': {
\     <mark>'fugitive': 'LightlineFugitive',</mark>
\     <mark>'readonly': 'LightlineReadonly',</mark>
\     <mark>'modified': 'LightlineModified',</mark>
\   }
\}
let g:lightline.separator = {
\   'left': 'î‚°', 'right': 'î‚²'
\}
let g:lightline.subseparator = {
\   'left': 'î‚±', 'right': 'î‚³'
\}
let g:lightline.tabline = {
\   'left': [['buffers']],
\   'right': [['string1'], ['string2']]
\}
let g:lightline.component_expand = {
\   'buffers': 'lightline#bufferline#buffers'
\}
let g:lightline.component_type = {
\   'buffers': 'tabsel'
\}

<mark>function! LightlineModified()
    return &amp;modified ? 'â—' : ''
endfunction</mark>

<mark>function! LightlineReadonly()
    return &amp;readonly ? 'î‚¢' : ''
endfunction</mark>

<mark>function! LightlineFugitive()
    if exists('*fugitive#head')
        let branch = fugitive#head()
        return branch !=# '' ? 'î‚  '.branch : ''
    endif
    return ''
endfunction</mark>
</pre>
<p>Pada bagian <code class="highlighter-rouge">'right': [['string1'], ['string2']]</code> juga sudah saya lakukan modifikasi dari yang sebelumnya <code class="highlighter-rouge">'right': [[close]]</code> pada bagian <a href="https://bandithijo.com/blog/lightline-alternatif-vim-statusline#tabline" target="_blank">Tabline</a>.</p>

<p>Saya juga melakukan modifikasi terhadap <code class="highlighter-rouge">modified</code> indikator yang tadinya <code class="highlighter-rouge">+</code> saya ubah agar lebih terlihat jelas menjadi <code class="highlighter-rouge">â—</code>.</p>

<p><strong>Hasilnya</strong>,
<!-- IMAGE CAPTION -->
<img src="/assets/img/logo/logo_blank.svg" alt="gambar_9" data-echo="https://i.postimg.cc/TPc2p3Zj/gambar-09.png" /></p>
<p class="img-caption">Gambar 9 - Dengan tambahan powerline symbol untuk master dan readonly</p>

<h1 id="pesan-penulis">Pesan Penulis</h1>

<p>Saya memutuskan untuk bermigrasi bukan berarti <code class="highlighter-rouge">vim-airline</code> tidak bagus dan berat. Hanya saja, pada kasus saya, saya mengalami â€œstartup delayâ€ yang entah dari mana datangnya tiba-tiba menghampiri Vim saya.</p>

<p>Kesempatan ini saya pergunakan untuk berekplorasi dengan statusline plugin yang lain, selain dari <code class="highlighter-rouge">vim-airline</code> yang tersohor. Hehehe.</p>

<p>Sebaik-baik dokumentasi adalah yang ditulis oleh developer pengembang dari masing-masing plugin. Silahkan kunjungin GitHub pages dari masing-masing plugin untuk penjelasan yang lebih kompleks.</p>

<h1 id="referensi">Referensi</h1>

<ol>
  <li>
    <p><a href="https://github.com/itchyny/lightline.vim" target="_blank">github.com/itchyny/lightline.vim</a>
<br />Diakses tanggal: 2019/01/26</p>
  </li>
  <li>
    <p><a href="https://github.com/mengelbrecht/lightline-bufferline" target="_blank">github.com/mengelbrecht/lightline-bufferline</a>
<br />Diakses tanggal: 2019/01/26</p>
  </li>
</ol>

:ET