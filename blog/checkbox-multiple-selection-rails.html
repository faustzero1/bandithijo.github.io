<!DOCTYPE html>
<html lang="id">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Here's where I started writing some notes that someday I will call it, a book">
<meta name="keywords" content="tips, rails, javascript">
<meta name="author" content="Rizqi Nur Assyaufi">
<meta name="theme-color" content="#008352">
<meta name="msapplication-navbutton-color" content="#008352">
<meta name="apple-mobile-web-app-status-bar-style" content="#008352">
<title>Membuat Checkbox dengan Multiple Selection pada Rails | BanditHijo (R)-Chive</title>
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/github-markdown-bandit.css">
<link rel="icon" href="/assets/img/favicon/favicon.png" type="image/png">
<link rel="manifest" href="/manifest.json">

  <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Membuat Checkbox dengan Multiple Selection pada Rails" />
<meta name="author" content="BanditHijo" />
<meta property="og:locale" content="id" />
<meta name="description" content="Catatan kali ini mengenai cara membuat checkbox dengan multiple selection pada Ruby on Rails." />
<meta property="og:description" content="Catatan kali ini mengenai cara membuat checkbox dengan multiple selection pada Ruby on Rails." />
<link rel="canonical" href="https://bandithijo.dev/blog/checkbox-multiple-selection-rails" />
<meta property="og:url" content="https://bandithijo.dev/blog/checkbox-multiple-selection-rails" />
<meta property="og:site_name" content="BanditHijo (R)-Chive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-12-10T09:07:00+08:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"BanditHijo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bandithijo.dev/blog/checkbox-multiple-selection-rails"},"description":"Catatan kali ini mengenai cara membuat checkbox dengan multiple selection pada Ruby on Rails.","url":"https://bandithijo.dev/blog/checkbox-multiple-selection-rails","@type":"BlogPosting","headline":"Membuat Checkbox dengan Multiple Selection pada Rails","dateModified":"2019-12-10T09:07:00+08:00","datePublished":"2019-12-10T09:07:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta property="og:country-name"   content="Indonesia"/>
<meta property="og:image"          content="https://bandithijo.dev/assets/img/banner/bndt_banner.png"/>
<meta property="og:image:width"    content="460"/>
<meta property="og:image:height"   content="230"/>

<meta property="twitter:card"      content="summary_large_image"/>
<meta property="twitter:title"     content="Membuat Checkbox dengan Multiple Selection pada Rails"/>
<meta property="twitter:author"    content="BanditHijo"/>
<meta property="twitter:image:src" content="https://bandithijo.dev/assets/img/banner/bndt_banner.png"/>

  <!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-116004889-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-688BWZGJ84"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-688BWZGJ84');
</script>
<!-- End Google tag (gtag.js) -->

  <meta name="google-site-verification" content="qXp9Kgb5hIHVp5T9vFOa_motqUmNuF5STbkJKF70wLc">

</head>


<body>

<header id="header" class="noselect">
  <div class="container container-strip">
    <div class="container-inner container-inner-strip">
    <div class="logo">
      <img src="/assets/img/logo/logo_bandithijo.png">
    </div>

    <div class="title">
      <h1><span class="nobr">BanditHijo (R)-Chive</span></h1>
    </div>
    <div class="description">
      <h2>Here's where I started writing some notes that someday <span class="nobr">I will call it, a book</span></h2>
      <br>
      <span class="emblem-f">TECHNICAL<span class="emblem-e">BLOG : JOURNAL</span></span>
    </div>

    <nav class="nav nav-strip">
      <div class="toggle">
        <div class="menu" onmouseover="this.style.cursor='pointer'" onclick="navBtn()">
          <span class="menu-title">BANDITHIJO</span>
          <img style="width:30px;" src="/assets/img/logo/logo_menu.svg" id="nav-btn">
        </div><!-- menu -->
      </div><!-- toggle -->
      <ul id="menu-ul">
        <li><a href="/">Home</a></li>
        
        
        
        <li><a href="/blog/" class="active">Blog</a></li>
        
        
        
        <li><a href="/note/" class="">Note</a></li>
        
        
        
        <li><a href="https://www.youtube.com/c/BanditHijo" class="">Vlog</a></li>
        
        
        
        <li><a href="/book/" class="">Books</a></li>
        
        
        
        <li><a href="/lab/" class="">Lab</a></li>
        
        
        
        <li><a href="/about/" class="">About</a></li>
        
      </ul>
    </nav>
    </div><!-- container-inner -->
  </div><!-- header container -->
</header>


<section id="main">
  <div class="container">
    <div class="container-edge-border">

      

      <article class="post-pre-title">
        <div class="post-body">
          
            <h1 class="post-title"><a href="/blog/checkbox-multiple-selection-rails">Membuat Checkbox dengan Multiple Selection pada Rails</a></h1>
          
          <label class="hideAside noselect" title="On/Off Sidebar" onclick="toggleShowHideSidebar()"><img style="width:20px;margin-top:5px;" src="/assets/img/logo/logo_menu.svg" alt=""></label>

          
          
          
            <span class="post-details noselect">Ditulis: 2019/12/10</span> <span class="post-details noselect">Diperbaharui: 2022/09/23</span>
          

          <div class="breadcrumbs noselect">

<span style="color:#232323;">&#9654;</span>&nbsp;<a href="/">Home</a>

  
    / <a href="/blog/">Blog</a>
  

  
    / Checkbox multiple selection rails
  

</div>

          <div class="tags-in-post noselect">
  
  
    <span class="tags"><a href="https://bandithijo.dev/tags/#javascript">Javascript</a></span>
  
    <span class="tags"><a href="https://bandithijo.dev/tags/#rails">Rails</a></span>
  
    <span class="tags"><a href="https://bandithijo.dev/tags/#tips">Tips</a></span>
  
</div>

        </div>
      </article>

      <article>
        <div class="post-body-sidebar">
          <aside class="sidebar noselect" id="sidebar-head">

    <div class="sidebar-body">
  <h1 style="font-size:1.5em;border-bottom:1px dashed #9E9E9E;">
    <img src="/assets/img/logo/logo_toc.svg">Daftar Isi
  </h1>
  <div class="toc">
    
    <ul>
  <li><a href="#prerequisite">Prerequisite</a></li>
  <li><a href="#prakata">Prakata</a></li>
  <li><a href="#sekenario">Sekenario</a></li>
  <li><a href="#eksekusi">Eksekusi</a>
    <ul>
      <li><a href="#controller">Controller</a></li>
      <li><a href="#view">View</a></li>
      <li><a href="#model">Model</a></li>
    </ul>
  </li>
  <li><a href="#referensi">Referensi</a></li>
</ul>

  </div>
</div>


</aside>

        </div>
      </article>

      <article class="post">
        <div class="post-body">
          <div class="doa-awal noselect">
<p><img src="/assets/img/logo/logo_doa_awal.svg" alt="بسم الله الرحمن الرحيم" style="height:40px" align="right"></p>
<div style="clear:both;"></div>
</div>

        </div>
        <div class="markdown-body highlight">

          <!-- The Modal -->
<div class="modal">
  <img class="modal-content">
</div>


          <p><!-- BANNER OF THE POST -->
<!-- <img class="post&#45;body&#45;img" src="/assets/img/logo/logo_blank_banner.svg" data&#45;echo="#" alt="banner"> -->

<h1 id="prerequisite">Prerequisite</h1>

<p><code class="language-plaintext highlighter-rouge">Ruby 2.6.3</code> <code class="language-plaintext highlighter-rouge">Rails 5.2.3</code> <code class="language-plaintext highlighter-rouge">PostgreSQL 11.5</code></p>

<h1 id="prakata">Prakata</h1>

<p>Rails, menyediakan helper method untuk menampilkan multiple checkbox pada view template yang bernama <code class="language-plaintext highlighter-rouge">collection_check_boxes</code>.</p>

<p>Kalau tidak salah, helper method ini mulai diperkenalkan pada Rails versi 4.0.2 hingga sekarang (6.0.0).</p>

<p>Helper ini masuk ke dalam kelas <strong>ActionView::Helpers::FormOptionsHelper</strong>. Nah, artinya, helper method ini kita gunakan di dalam form.</p>

<blockquote>
  <p><strong>collection_check_boxes</strong>(object, method, collection, value_method, text_method, options = {}, html_options = {}, &amp;block) <em>public</em></p>
</blockquote>

<p>Lebih jauh mengenail helper method ini, dapat teman-teman baca sendiri pada dokumentasi di <a href="#referensi"><strong>apidock.com/rails</strong></a> yaa.</p>

<h1 id="sekenario">Sekenario</h1>

<p>Misalkan, saya memiliki 3 pilihan berupa, Adult, Teen, dan Children.</p>

<p>Saya ingin user dapat memilih salah satu, dua atau ketiganya.</p>

<p>Hasil dari inputan checkbox ini akan dimasukkan ke dalam field <code class="language-plaintext highlighter-rouge">:age_preference</code> dengan tipe data string.</p>

<p>Checkbox ini akan harus dapat:</p>

<ol>
  <li>Memasukkan data, pada saat membuat data baru <code class="language-plaintext highlighter-rouge">:new</code></li>
  <li>Menampilkan data yang sudah ada pada database, pada saat mengedit data <code class="language-plaintext highlighter-rouge">:edit</code></li>
  <li>Menampilkan data dengan format (bentuk) yang benar</li>
  <li>Memiliki fitur “Select All” agar mudah dioperasikan</li>
</ol>

<p>Kira-kira seperti ini hasilnya,</p>

<p><img src="/assets/img/logo/logo_blank.svg" alt="gambar_1" data-echo="https://i.postimg.cc/5yCpTnr2/gambar-01.gif" onerror="imgError(this);" class="myImg" /></p>
<p class="img-caption">Gambar 1 - Multiple checkbox dengan fitur Select All</p>

<p><img src="/assets/img/logo/logo_blank.svg" alt="gambar_2" data-echo="https://i.postimg.cc/HWcSrkL1/gambar-02.gif" onerror="imgError(this);" class="myImg" /></p>
<p class="img-caption">Gambar 2 - Uncheck Select All jika salah satu dari checkbox tidak dicentang</p>

<h1 id="eksekusi">Eksekusi</h1>

<p>Saya sudah memiliki field <code class="language-plaintext highlighter-rouge">:age_preference</code> dengan tipe data string pada skema database.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>db/scheme.rb</code></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="n">create_table</span> <span class="s2">"experiences"</span><span class="p">,</span> <span class="ss">force: :cascade</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
  <span class="c1"># ...</span>
  <span class="c1"># ...</span>
  <span class="c1"># ...</span>
  <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="s2">"age_preference"</span>
  <span class="c1"># ...</span>
  <span class="c1"># ...</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></figure>

<h2 id="controller">Controller</h2>

<p>Bagian controller ini tidak penting pada catatan ini.</p>

<p>Karena pada intinya, saya hanya akan membuat sebuah instance variable yang akan digunakan form di view template.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>app/controllers/experiences_controller.rb</code></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">ExperiencesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@experience</span> <span class="o">=</span> <span class="no">Experience</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@experience</span> <span class="o">=</span> <span class="no">Experience</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">experience_params</span><span class="p">)</span>

    <span class="k">if</span> <span class="vi">@experience</span><span class="p">.</span><span class="nf">save</span>
      <span class="n">redirect_to</span> <span class="n">experience_path</span><span class="p">(</span><span class="vi">@experience</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:new</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">edit</span>
    <span class="vi">@experience</span> <span class="o">=</span> <span class="no">Experience</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@experience</span> <span class="o">=</span> <span class="no">Experience</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>

    <span class="k">if</span> <span class="vi">@experience</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">experience_params</span><span class="p">)</span>
      <span class="n">redirect_to</span> <span class="n">experience_path</span><span class="p">(</span><span class="vi">@experience</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:edit</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">experience_params</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:experience</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span> <span class="o">...</span><span class="p">,</span> <span class="ss">:age_preference</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Selanjutnya, saya akan membuat tampilan multiple checkbox pada view template.</p>

<h2 id="view">View</h2>

<p>Berdasarkan sekenario di atas, pada nomor 1 dan 2, artinya, saya memiliki form pada saat <code class="language-plaintext highlighter-rouge">:new</code> dan <code class="language-plaintext highlighter-rouge">:edit</code>.</p>

<p>Lebih mudah, dibuatkan render partial agar bisa berbagi form. Wkwkwk.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>app/view/experiences/new.html.erb</code></div>

<figure class="highlight"><pre><code class="language-eruby" data-lang="eruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="cp">&lt;%=</span> <span class="n">form_for</span><span class="p">(</span><span class="vi">@experience</span><span class="p">,</span> <span class="ss">url: </span><span class="p">{</span><span class="ss">action: :create</span><span class="p">},</span> <span class="ss">html: </span><span class="p">{</span><span class="ss">id: </span><span class="s1">'form'</span><span class="p">})</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'form'</span><span class="p">,</span> <span class="ss">f: </span><span class="n">f</span><span class="p">,</span> <span class="ss">experience: </span><span class="vi">@experience</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</pre></td></tr></tbody></table></code></pre></figure>

<div class="highlight-caption"><span class="label">FILE</span><code>app/view/experiences/edit.html.erb</code></div>

<figure class="highlight"><pre><code class="language-eruby" data-lang="eruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="cp">&lt;%=</span> <span class="n">form_for</span><span class="p">(</span><span class="vi">@experience</span><span class="p">,</span> <span class="ss">url: </span><span class="p">{</span><span class="ss">action: :update</span><span class="p">},</span> <span class="ss">html: </span><span class="p">{</span><span class="ss">id: </span><span class="s1">'form'</span><span class="p">})</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'form'</span><span class="p">,</span> <span class="ss">f: </span><span class="n">f</span><span class="p">,</span> <span class="ss">experience: </span><span class="vi">@experience</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Nah, selanjutnya tinggal membuat view template form yang akan digunakan oleh kedua view template di atas.</p>

<p>Namun, saya akan pangkas hanya pada bagian input untuk <code class="language-plaintext highlighter-rouge">:age_preference</code> saja.</p>

<p>CSS class yang ada pada contoh di bawah, hanya <em>dummy</em>.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>app/view/experiences/_form.html.erb</code></div>

<figure class="highlight"><pre><code class="language-eruby" data-lang="eruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;label&gt;</span>Age Preference<span class="nt">&lt;/label&gt;</span>
  <span class="c">&lt;!-- Untuk [] Adult, [] Teen, [] Children --&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">collection_check_boxes</span> <span class="ss">:age_preference</span><span class="p">,</span> <span class="p">[</span><span class="s1">'Adult'</span><span class="p">,</span> <span class="s1">'Teen'</span><span class="p">,</span> <span class="s1">'Children'</span><span class="p">],</span> <span class="ss">:to_s</span><span class="p">,</span> <span class="ss">:to_s</span><span class="p">,</span>
  <span class="p">(</span><span class="n">experience</span><span class="p">.</span><span class="nf">age_preference</span><span class="p">.</span><span class="nf">nil?</span> <span class="p">?</span> <span class="p">{}</span> <span class="p">:</span> <span class="p">{</span><span class="ss">checked: </span><span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">experience</span><span class="p">.</span><span class="nf">age_preference</span><span class="p">.</span><span class="nf">to_json</span><span class="p">).</span><span class="nf">split</span><span class="p">(</span><span class="s2">", "</span><span class="p">)})</span> <span class="k">do</span> <span class="o">|</span><span class="n">b</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"custom-checkbox"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">b</span><span class="p">.</span><span class="nf">check_box</span> <span class="ss">class: </span><span class="s1">'custom-control-input checkbox-item'</span> <span class="cp">%&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">b</span><span class="p">.</span><span class="nf">label</span> <span class="ss">class: </span><span class="s1">'custom-control-label'</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
  <span class="c">&lt;!-- Untuk [] Select All --&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"custom-checkbox"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">check_box_tag</span> <span class="s2">"Select All"</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"custom-control-input checkbox-all"</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">label_tag</span> <span class="s2">"Select All"</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"custom-control-label"</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Puanjang sekali yaa? Wkwkwk</p>

<p>Apa kegunaan dari option,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">experience</span><span class="p">.</span><span class="nf">age_preference</span><span class="p">.</span><span class="nf">nil?</span> <span class="p">?</span> <span class="p">{}</span> <span class="p">:</span> <span class="p">{</span><span class="ss">checked: </span><span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">experience</span><span class="p">.</span><span class="nf">age_preference</span><span class="p">.</span><span class="nf">to_json</span><span class="p">).</span><span class="nf">split</span><span class="p">(</span><span class="s2">", "</span><span class="p">)})</span>
</code></pre></div></div>

<p>Option tersebut saya tambahan untuk menampilkan data yang sudah ada pada database pada saat proses <code class="language-plaintext highlighter-rouge">:edit</code>. Kalau tanpa baris itu, maka pada saat proses edit, checkbox akan kembali uncheck all.</p>

<p>Nah, kita memerlukan bantuan Javascript, untuk membuat feature “Select All”.</p>

<p>Pada class yang dimiliki oleh <code class="language-plaintext highlighter-rouge">check_box</code>, terdapat 2 kelas yang berbeda.</p>

<p><code class="language-plaintext highlighter-rouge">checkbox-item</code> untuk Adult, Teen, dan Children. Sdangkan <code class="language-plaintext highlighter-rouge">checkbox-all</code> untuk Select All.</p>

<p>Langsung kita tambahkan Javascript pada bagian paling bawah dari file <code class="language-plaintext highlighter-rouge">_form.html.erb</code> ini.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>app/view/experiences/_form.html.erb</code></div>

<figure class="highlight"><pre><code class="language-eruby" data-lang="eruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="nt">&lt;script&gt;</span>
  <span class="c1">// For age preference select all feature</span>
  <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.checkbox-checkall</span><span class="dl">"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.checkbox-item</span><span class="dl">"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">checked</span><span class="dl">"</span><span class="p">,</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="dl">"</span><span class="s2">:checked</span><span class="dl">"</span><span class="p">))</span>
  <span class="p">});</span>

  <span class="c1">// For unchecked select all checkbox if one of checkbox-item unchecked</span>
  <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.checkbox-item</span><span class="dl">"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.checkbox-item:checked</span><span class="dl">"</span><span class="p">).</span><span class="nx">length</span> <span class="o">==</span> <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.checkbox-item</span><span class="dl">"</span><span class="p">).</span><span class="nx">length</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.checkbox-checkall</span><span class="dl">"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">checked</span><span class="dl">"</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.checkbox-checkall</span><span class="dl">"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">checked</span><span class="dl">"</span><span class="p">,</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Nah, feature multiple checkbox dengan tambahan select all sudah selesai.</p>

<p>Selanjutnya kita perlu merubah data yang di passing dari view template ini ke model dalam bentuk yang mudah untuk dibaca di database.</p>

<p>Kita akan tambahkan method untuk mempercantik bentuk datanya terlebih dahulu pada model.</p>

<h2 id="model">Model</h2>

<p>Karena data output dari helper method <code class="language-plaintext highlighter-rouge">collection_check_boxes</code> ini berupa array, maka saya akan merubahnya menjadi string karena field <code class="language-plaintext highlighter-rouge">:age_preference</code> bertipe data string. Namun, kalau langsung disimpan, bentuk datanya akan jelek, wkwkwk.</p>

<p>Sebenarnya ini bukan masalah, karena kita dapat membuat helper method lain untuk mengkonversi tampilan data, namun saya lebih memilih untuk merubah bentuk datanya sebelum disimpan. Maka dari itu saya membuat method untuk merubah bentuk data yang akan disimpan pada model.</p>

<p>Bentuk data yang akan disimpan seperti ini apabila belum dirubah.</p>

<pre style="border:1px solid black;color:black;background:white;">
"[\"Adult\", \"Teen\", \"Children\"]"
</pre>

<p>Sedangkan, yang saya inginkan seperti ini,</p>

<pre style="border:1px solid black;color:black;background:white;">
"Adult, Teen, Children"
</pre>

<p>Nah, ini adalah method yang saya tambahkan pada model, untuk merubah bentuk data hasil dari <code class="language-plaintext highlighter-rouge">collection_check_boxes</code>.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>app/models/experience.rb</code></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">Experience</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="c1"># ...</span>
  <span class="c1"># ...</span>
  <span class="c1"># ...</span>

  <span class="n">before_save</span> <span class="k">do</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">age_preference</span><span class="p">.</span><span class="nf">gsub!</span><span class="p">(</span><span class="sr">/[\[\]\"]/</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span><span class="o">&amp;</span><span class="p">.</span><span class="nf">delete_prefix!</span><span class="p">(</span><span class="s2">", "</span><span class="p">)</span> <span class="k">if</span> <span class="n">attribute_present?</span><span class="p">(</span><span class="s2">"age_preference"</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Dengan begini, pada saat akan menggunakan data <code class="language-plaintext highlighter-rouge">:age_preference</code> untuk digunakan pada view temlate, tidak perlu repot, karena bentuk datanya sudah bagus.</p>

<p>Misal pada <code class="language-plaintext highlighter-rouge">:show</code>.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>app/view/experiences/show.html</code></div>

<figure class="highlight"><pre><code class="language-eruby" data-lang="eruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
</pre></td><td class="code"><pre>Age Preference : <span class="cp">&lt;%=</span> <span class="vi">@experience</span><span class="p">.</span><span class="nf">age_preference</span> <span class="cp">%&gt;</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Mungkin bukan cara yang baik, jadi teman-teman tidak harus mengikutinya atau menggunakan cara yang lebih baik yaa.</p>

<p>Bagaimanapun juga saya masih seorang Junior Rails Developer yang belum memiliki pengalaman yang cukup dalam mendevelop web app yang baik.</p>

<p>Sepertinya segini saja, mudah-mudahan dapat bermanfaat buat teman-teman.</p>

<p>Terima kasih.</p>

<p>(^_^)</p>

<h1 id="referensi">Referensi</h1>

<ol>
  <li><a href="https://apidock.com/rails/v4.0.2/ActionView/Helpers/FormOptionsHelper/collection_check_boxes" target="_blank">apidock.com/rails/v4.0.2/ActionView/Helpers/FormOptionsHelper/collection_check_boxes</a>
<br />Diakses tanggal: 2019/12/10</li>
</ol>
</p>

          <!-- wip -->
          
            <br>
          

          <!-- License -->
          
            <div style="text-align:center; margin:0 0 10px 0;"></div>
            
              <div class="noselect">
<h1 style="font-size:2em;">Lisensi</h1>
<div class="ccbysa-img noselect"><img class="ccbysa-img-img" style="margin-top: 5px;" src="/assets/img/logo/cc-by-nc-sa.png" alt="logo_cc-by-nc-sa"/></div><!-- ccbysa -->
<div class="ccbysa-text noselect">
Tulisan ini dilisensikan dengan :<br>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.id" target="_blank">Atribusi-NonKomersial-BerbagiSerupa 4.0 Internasional (CC BY-NC-SA 4.0)</a>
</div><!-- ccbysa-text -->
</div>

            
          

          <div style="clear:both;"></div>

          <!-- Penulis -->
          
            <div style="text-align:center; margin:0 0 10px 0;"></div>

            

            
              <div class="noselect">
  <h1 style="font-size:2em;">Penulis</h1>
  
  
    
      <div class="penulis-img">
        <img style="margin:0 auto;border-radius:50%;" src="https://github.com/bandithijo.png?size=200" alt="bandithijo" onerror="imgError(this);">
      </div><!-- penulis-img -->

      <div class="penulis-text">
        <p><p><b>BanditHijo</b> adalah nama pena saya –meminjam istilah keren dari para penulis. Teman-teman menyebut saya sebagai GNU/Linux Enthusiast. Saya memang gemar mengutak-atik sistem operasi ini. Sistem operasi ini memberikan saya kebebasan untuk mengekspresikan ide-ide dalam membantu menyelesaikan pekerjaan saya sehari-hari.</p></p>
        <p style="text-align:right;">- <b>Rizqi Nur Assyaufi</b></p>
      </div><!-- penulis-text -->
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</div>

            
          

          <div style="clear:both;"></div>

          

        </div><!-- markdown-body -->
      </article>

      <article>
        <div class="post-body-sidebar">
          <aside class="sidebar noselect" id="sidebar-tail">

    <div class="sidebar-body">
  <h1 style="font-size:1.5em;border-bottom:1px dashed #9E9E9E;">
    <img src="/assets/img/logo/logo_terbaru.svg">Tulisan Terbaru
  </h1>
  <div class="toc">
  <ul>
  
  
    
      <li><a href="/blog/mudah-mengenkripsi-file-dokumen-dengan-gnupg">Mudah Mengenkripsi File dan Dokumen dengan GnuPG (GPG)</a></li>
    
  
    
      <li><a href="/blog/dmenu-websearch-jalan-pintas-pencari-kata-yang-praktis">dmenu-websearch, Jalan Pintas Pencari Kata yang Praktis</a></li>
    
  
    
      <li><a href="/blog/sxiv-simple-x-image-viewer-yang-praktis">sxiv, Simple X Image Viewer (sxiv) yang Praktis namun Powerfull</a></li>
    
  
    
      <li><a href="/blog/presentation-mode-dengan-dpms-di-linux">Membuat Presentation Mode tanpa XFCE4 Power Manager di GNU/Linux (Bonus! dmenu-presentationmode)</a></li>
    
  
    
      <li><a href="/blog/bluetooth-headset-battery-status">Bluetooth Headset Battery Status</a></li>
    
  
    
      <li><a href="/blog/berdonasi-ke-project-open-source-yang-digunakan">Hanya dengan 100 Ribu Rupiah, Bisa Berdonasi ke 6 Open Source Project!</a></li>
    
  
    
      <li><a href="/blog/menjalankan-distro-linux-lain-dengan-distrobox-di-fedora-linux">Menjalankan Distro Linux yang Lain dengan Distrobox di Fedora Linux</a></li>
    
  
    
      <li><a href="/blog/datetimepicker-dengan-tempusdominus-bootstrap-4-dan-simple-form-di-rails">Date Time Picker dengan Tempus Dominus Bootstrap 4 dan simple_form di Ruby on Rails 6</a></li>
    
  
    
      <li><a href="/blog/datetimepicker-dengan-tempusdominus-bootstrap-4-di-rails">Date Time Picker dengan Tempus Dominus Bootstrap 4 di Ruby on Rails 6</a></li>
    
  
    
      <li><a href="/blog/lazygit-terminal-user-interface-untuk-git">Lazygit, Terminal User Interface untuk Git Commands</a></li>
    
  
  </ul>
  </div>
  <div style="margin:10px 0 10px 0;border-bottom:1px dashed #9E9E9E;"></div>
  <p style="text-align:left;"><a style="border-bottom:0;" href="/blog/"><b>Selengkapnya >></b></a></p>
</div>

    <div class="sidebar-body">
  <h1 style="font-size:1.5em;border-bottom:1px dashed #9E9E9E;">
    <img src="/assets/img/logo/logo_tags.svg"><a style="color:#000;border-bottom:none;" href="/tags/">Tags</a>
  </h1>
  <div class="toc">
    
    
      
        
        <span class="tags"><a href="/tags/#android">Android</a></span>
      
        
        <span class="tags"><a href="/tags/#arch-linux">Arch Linux</a></span>
      
        
        <span class="tags"><a href="/tags/#artix-linux">Artix Linux</a></span>
      
        
        <span class="tags"><a href="/tags/#bootstrap">Bootstrap</a></span>
      
        
        <span class="tags"><a href="/tags/#container">Container</a></span>
      
        
        <span class="tags"><a href="/tags/#database">Database</a></span>
      
        
        <span class="tags"><a href="/tags/#docker">Docker</a></span>
      
        
        <span class="tags"><a href="/tags/#event">Event</a></span>
      
        
        <span class="tags"><a href="/tags/#fedora">Fedora</a></span>
      
        
        <span class="tags"><a href="/tags/#freebsd">FreeBSD</a></span>
      
        
        <span class="tags"><a href="/tags/#git">Git</a></span>
      
        
        <span class="tags"><a href="/tags/#heroku">Heroku</a></span>
      
        
        <span class="tags"><a href="/tags/#i3wm">I3WM</a></span>
      
        
        <span class="tags"><a href="/tags/#java">Java</a></span>
      
        
        <span class="tags"><a href="/tags/#javascript">Javascript</a></span>
      
        
        <span class="tags"><a href="/tags/#jekyll">Jekyll</a></span>
      
        
        <span class="tags"><a href="/tags/#kvm">KVM</a></span>
      
        
        <span class="tags"><a href="/tags/#mysql">MySQL</a></span>
      
        
        <span class="tags"><a href="/tags/#network">Network</a></span>
      
        
        <span class="tags"><a href="/tags/#osx">OSX</a></span>
      
        
        <span class="tags"><a href="/tags/#podman">Podman</a></span>
      
        
        <span class="tags"><a href="/tags/#postgresql">PostgreSQL</a></span>
      
        
        <span class="tags"><a href="/tags/#python">Python</a></span>
      
        
        <span class="tags"><a href="/tags/#qemu">Qemu</a></span>
      
        
        <span class="tags"><a href="/tags/#rspec">RSpec</a></span>
      
        
        <span class="tags"><a href="/tags/#rails">Rails</a></span>
      
        
        <span class="tags"><a href="/tags/#ruby">Ruby</a></span>
      
        
        <span class="tags"><a href="/tags/#script">Script</a></span>
      
        
        <span class="tags"><a href="/tags/#security">Security</a></span>
      
        
        <span class="tags"><a href="/tags/#terminal">Terminal</a></span>
      
        
        <span class="tags"><a href="/tags/#thinkpad">ThinkPad</a></span>
      
        
        <span class="tags"><a href="/tags/#tips">Tips</a></span>
      
        
        <span class="tags"><a href="/tags/#tools">Tools</a></span>
      
        
        <span class="tags"><a href="/tags/#ulasan">Ulasan</a></span>
      
        
        <span class="tags"><a href="/tags/#vim">Vim</a></span>
      
        
        <span class="tags"><a href="/tags/#virt-manager">Virt-Manager</a></span>
      
        
        <span class="tags"><a href="/tags/#wine">Wine</a></span>
      
        
        <span class="tags"><a href="/tags/#xfce">XFCE</a></span>
      
        
        <span class="tags"><a href="/tags/#jquery">jQuery</a></span>
      
        
        <span class="tags"><a href="/tags/#opensuse">openSUSE</a></span>
      
        
        <span class="tags"><a href="/tags/#ssh">ssh</a></span>
      
    
    
  </div><!-- toc -->
</div><!-- sidebar-body -->

    <div class="sidebar-body">
  <h1 style="font-size:1.5em;border-bottom:1px dashed #9E9E9E;margin-bottom:5px;">
    <img src="/assets/img/logo/logo_dotfriends.svg">dotFriends
  </h1>
  <!-- untuk random dotfriends list sebanyak 8 -->
  
  
    
        <p>+&nbsp;<a href="https://elianiva.my.id/" target="_blank">manusia_bernapas</a></p>
    
        <p>+&nbsp;<a href="https://github.com/fikriomar16" target="_blank">Fikri Omar</a></p>
    
        <p>+&nbsp;<a href="https://didik.id" target="_blank">Didik Wicaksono</a></p>
    
        <p>+&nbsp;<a href="https://addy-dclxvi.github.io" target="_blank">addy-dclxvi</a></p>
    
        <p>+&nbsp;<a href="https://agung-setiawan.com" target="_blank">agungsetiawan</a></p>
    
  
  <p style="font-size:10px;color:#00603C;margin-top:12px;text-align:left;">*5 daftar blog di atas digenerate secara random</p>
  <div style="margin:10px 0 10px 0;border-bottom:1px dashed #9E9E9E;"></div>
  <p style="text-align:left;"><a style="border-bottom:0;" href="/dotfriends/"><b>Selengkapnya >></b></a></p>
</div>

    <div class="sidebar-body-rss"">
  <h1 style="border-bottom:1px dashed #ACA573;margin-bottom:5px;">
    <img src="/assets/img/logo/logo_bantuan.svg">Bantuan
  </h1>
   <p>Kebingungan dengan simbol-simbol yang terdapat pada halaman blog ini?</p>
   <p>Kamu dapat mempelajari bagaimana cara membaca setiap komponen yang ada di dalam blog, <a href="/bantuan/"><b>di sini</b></a>.</p>
</div>

    <div class="sidebar-body-rss">
  <h1 style="font-size:1.5em;border-bottom:1px dashed #ACA573;margin-bottom:5px;">
    <img src="/assets/img/logo/logo_rss.svg">Berlangganan RSS
  </h1>
  <p>Untuk dapat berlangganan catatan/post terbaru, kamu dapat mengklik tombol RSS yang terdapat di <a href="#footer"><b>footer</b></a>.</p>
  <p>Blog ini memiliki <del>dua</del> satu buah RSS feed, Blog dan <del>Vlog</del>.</p>
  <p>Apabila kamu mengklik tombol RSS yang ada pada halaman yang berkategori Blog, maka RSS feed url yang keluar adalah untuk kategori Blog, begitu pula sebaliknya untuk halaman Vlog.</p>
  <div style="margin:15px 0 10px 0;border-bottom:1px dashed #ACA573;"></div>
  <p>Belum tahu tentang RSS? Yuk, <a href="https://bandithijo.dev/blog/newsboat-rss-feed-reader"><b>ke sini</b></a></p>
</div>


</aside>

        </div>
      </article>

    </div><!-- container-edge-border -->
  </div><!-- main container -->
</section><!-- main -->


<footer id="footer" class="noselect">
  <div class="container">
    <div class="container-inner">
      <div class="footer-line">
        <p style="font-size:20px;"><a href="/"><strong>BanditHijo (R)-Chive</strong></a> &copy; 2012 - 2022</p>
        <p style="font-size:12px;margin-top:-35px;color:#404040;">
          Source code dan artikel-artikel ditulis menggunakan <span class="nobr"><a href="http://vim.org" target="_blank" rel="noreferrer" style="font-weight:bold;color:#404040;">Vim</a> text editor.</span><br>
          Semua elemen gambar dikerjakan menggunakan <span class="nobr"><a href="https://inkscape.org" target="_blank" rel="noreferrer" style="font-weight:bold;color:#404040;">Inkscape</a> dan <a href="https://gimp.org" target="_blank" rel="noreferrer" style="font-weight:bold;color:#404040;">GIMP</a>.</span><br>
          Menggunakan <a href="https://jekyllrb.com" target="_blank" rel="noreferrer" style="font-weight:bold;color:#404040;">Jekyll</a> sebagai Static Site Generator.<br>
          Dihosting menggunakan <a href="https://github.com/bandithijo/bandithijo.github.io" target="_blank" rel="noreferrer" style="font-weight:bold;color:#404040;">GitHub</a>.<br>
          Terakhir update: <b>23/09/2022</b>
        </p>
        <p class="footer-menu">
          <br>
          <a href="/contact/"><strong>Contact</strong></a> |&nbsp;
          <a href="https://twitter.com/bandithijo" target="_blank" rel="noreferrer"><strong>Twitter</strong></a> |&nbsp;
          <a rel="me" href="https://www.youtube.com/c/BanditHijo" target="_blank" rel="noreferrer"><strong>YouTube</strong></a> |&nbsp;
          <a rel="me" href="https://github.com/bandithijo" target="_blank" rel="noreferrer"><strong>GitHub</strong></a> |&nbsp;
          
            <a href="/feed/blog.xml" target="_blank"><strong>RSS</strong></a>
          
        </p>

        
        
        
        
        
        
        
        
        
        
        
        
        
        

        <div class="tech-i-used-desktop">
          <a href="https://jekyllrb.com" target="_blank" rel="noopener">
            <img class="footer-img-jekyll" src="/assets/img/logo/logo_jekyll.png">
          </a>
          <a href="https://www.ruby-lang.org" target="_blank" rel="noopener">
            <img class="footer-img-ruby" src="/assets/img/logo/logo_ruby.png">
          </a>
          <a href="https://netlify.app" target="_blank" rel="noopener">
            <img class="footer-img-netlify" src="/assets/img/logo/logo_netlify.png">
          </a>
          
          
          
          
          
          
        </div><!-- tech-i-used-desktop -->

        <div class="tech-i-used-mobile">
          
          
          
          
          
          
          
          
          
          <a href="https://netlify.app" target="_blank" rel="noopener" rel="noreferrer">
            <img class="footer-img-netlify-mobile" src="/assets/img/logo/logo_netlify_mobile.png">
          </a>
          <a href="https://www.ruby-lang.org" target="_blank" rel="noopener" rel="noreferrer">
            <img class="footer-img-ruby-mobile" src="/assets/img/logo/logo_ruby_mobile.png">
          </a>
          <a href="https://jekyllrb.com/" target="_blank" rel="noopener" rel="noreferrer">
            <img class="footer-img-jekyll-mobile" src="/assets/img/logo/logo_jekyll_mobile.png">
          </a>
        </div><!-- tech-i-used-mobile -->
      </div><!-- footer-line -->
    </div><!-- container-innner -->
  </div><!-- footer container -->
</footer>

<!-- site.git.build_version -->
<div class="tech-i-used-desktop" style="text-align:center;font-size:9px;color:#8F8879;margin: -5px 0 10px 0;">
  
</div>
<!-- END site.git.build_version -->

<script type="text/javascript" src="/assets/js/nav.js"></script>
<script type="text/javascript" src="/assets/js/lazyload.js"></script>
<script type="text/javascript" src="/assets/js/headings-permalink.js"></script>


<script type="text/javascript" src="/assets/js/aside.js"></script>


<script type="text/javascript" src="/assets/js/enlarge-image-modal.js"></script>




</body>
</html>
