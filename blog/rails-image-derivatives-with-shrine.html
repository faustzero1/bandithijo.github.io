<!DOCTYPE html>
<html lang="id">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Here's where I started writing some notes that someday I will call it, a book">
<meta name="keywords" content="tips, rails">
<meta name="author" content="Rizqi Nur Assyaufi">
<meta name="theme-color" content="#008352">
<meta name="msapplication-navbutton-color" content="#008352">
<meta name="apple-mobile-web-app-status-bar-style" content="#008352">
<title>Membuat Image Derivatives dengan Shrine pada Rails | BanditHijo (R)-Chive</title>
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/github-markdown-bandit.css">
<link rel="icon" href="/assets/img/favicon/favicon.png" type="image/png">
<link rel="manifest" href="/manifest.json">

  <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Membuat Image Derivatives dengan Shrine pada Rails" />
<meta name="author" content="BanditHijo" />
<meta property="og:locale" content="id" />
<meta name="description" content="Membuat turunan dari original image dapat mempermudah kita membuat diferensiasi terhadap ukuran image yang akan kita gunakan pada masing-msing kebutuhan yang berbeda pada sis frontend. Misalkan, ukuran image untuk thumbnails, menggunakan image dengan ukuran yang lebih kecil dari pada image untuk gallery. Catatan kali ini, akan membahas bagaimana cara membuat image derivatives dengan Shrine gem pada Ruby on Rails." />
<meta property="og:description" content="Membuat turunan dari original image dapat mempermudah kita membuat diferensiasi terhadap ukuran image yang akan kita gunakan pada masing-msing kebutuhan yang berbeda pada sis frontend. Misalkan, ukuran image untuk thumbnails, menggunakan image dengan ukuran yang lebih kecil dari pada image untuk gallery. Catatan kali ini, akan membahas bagaimana cara membuat image derivatives dengan Shrine gem pada Ruby on Rails." />
<link rel="canonical" href="https://bandithijo.dev/blog/rails-image-derivatives-with-shrine" />
<meta property="og:url" content="https://bandithijo.dev/blog/rails-image-derivatives-with-shrine" />
<meta property="og:site_name" content="BanditHijo (R)-Chive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-19T14:22:00+08:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"BanditHijo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bandithijo.dev/blog/rails-image-derivatives-with-shrine"},"description":"Membuat turunan dari original image dapat mempermudah kita membuat diferensiasi terhadap ukuran image yang akan kita gunakan pada masing-msing kebutuhan yang berbeda pada sis frontend. Misalkan, ukuran image untuk thumbnails, menggunakan image dengan ukuran yang lebih kecil dari pada image untuk gallery. Catatan kali ini, akan membahas bagaimana cara membuat image derivatives dengan Shrine gem pada Ruby on Rails.","url":"https://bandithijo.dev/blog/rails-image-derivatives-with-shrine","@type":"BlogPosting","headline":"Membuat Image Derivatives dengan Shrine pada Rails","dateModified":"2020-02-19T14:22:00+08:00","datePublished":"2020-02-19T14:22:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta property="og:country-name"   content="Indonesia"/>
<meta property="og:image"          content="https://bandithijo.dev/assets/img/banner/bndt_banner.png"/>
<meta property="og:image:width"    content="460"/>
<meta property="og:image:height"   content="230"/>

<meta property="twitter:card"      content="summary_large_image"/>
<meta property="twitter:title"     content="Membuat Image Derivatives dengan Shrine pada Rails"/>
<meta property="twitter:author"    content="BanditHijo"/>
<meta property="twitter:image:src" content="https://bandithijo.dev/assets/img/banner/bndt_banner.png"/>

  <!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-116004889-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-688BWZGJ84"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-688BWZGJ84');
</script>
<!-- End Google tag (gtag.js) -->

  <meta name="google-site-verification" content="qXp9Kgb5hIHVp5T9vFOa_motqUmNuF5STbkJKF70wLc">

</head>


<body>

<header id="header" class="noselect">
  <div class="container container-strip">
    <div class="container-inner container-inner-strip">
    <div class="logo">
      <img src="/assets/img/logo/logo_bandithijo.png">
    </div>

    <div class="title">
      <h1><span class="nobr">BanditHijo (R)-Chive</span></h1>
    </div>
    <div class="description">
      <h2>Here's where I started writing some notes that someday <span class="nobr">I will call it, a book</span></h2>
      <br>
      <span class="emblem-f">TECHNICAL<span class="emblem-e">BLOG : JOURNAL</span></span>
    </div>

    <nav class="nav nav-strip">
      <div class="toggle">
        <div class="menu" onmouseover="this.style.cursor='pointer'" onclick="navBtn()">
          <span class="menu-title">BANDITHIJO</span>
          <img style="width:30px;" src="/assets/img/logo/logo_menu.svg" id="nav-btn">
        </div><!-- menu -->
      </div><!-- toggle -->
      <ul id="menu-ul">
        <li><a href="/">Home</a></li>
        
        
        
        <li><a href="/blog/" class="active">Blog</a></li>
        
        
        
        <li><a href="/note/" class="">Note</a></li>
        
        
        
        <li><a href="https://www.youtube.com/c/BanditHijo" class="">Vlog</a></li>
        
        
        
        <li><a href="/book/" class="">Books</a></li>
        
        
        
        <li><a href="/lab/" class="">Lab</a></li>
        
        
        
        <li><a href="/about/" class="">About</a></li>
        
      </ul>
    </nav>
    </div><!-- container-inner -->
  </div><!-- header container -->
</header>


<section id="main">
  <div class="container">
    <div class="container-edge-border">

      

      <article class="post-pre-title">
        <div class="post-body">
          
            <h1 class="post-title"><a href="/blog/rails-image-derivatives-with-shrine">Membuat Image Derivatives dengan Shrine pada Rails</a></h1>
          
          <label class="hideAside noselect" title="On/Off Sidebar" onclick="toggleShowHideSidebar()"><img style="width:20px;margin-top:5px;" src="/assets/img/logo/logo_menu.svg" alt=""></label>

          
          
          
            <span class="post-details noselect">Ditulis: 2020/02/19</span> <span class="post-details noselect">Diperbaharui: 2022/09/23</span>
          

          <div class="breadcrumbs noselect">

<span style="color:#232323;">&#9654;</span>&nbsp;<a href="/">Home</a>

  
    / <a href="/blog/">Blog</a>
  

  
    / Rails image derivatives with shrine
  

</div>

          <div class="tags-in-post noselect">
  
  
    <span class="tags"><a href="https://bandithijo.dev/tags/#rails">Rails</a></span>
  
    <span class="tags"><a href="https://bandithijo.dev/tags/#tips">Tips</a></span>
  
</div>

        </div>
      </article>

      <article>
        <div class="post-body-sidebar">
          <aside class="sidebar noselect" id="sidebar-head">

    <div class="sidebar-body">
  <h1 style="font-size:1.5em;border-bottom:1px dashed #9E9E9E;">
    <img src="/assets/img/logo/logo_toc.svg">Daftar Isi
  </h1>
  <div class="toc">
    
    <ul>
  <li><a href="#prerequisite">Prerequisite</a></li>
  <li><a href="#prakata">Prakata</a>
    <ul>
      <li><a href="#shrine-itu-apa-yaa">Shrine itu apa yaa?</a></li>
      <li><a href="#kenapa-memilih-menggunakan-shrine">Kenapa memilih menggunakan Shrine?</a></li>
    </ul>
  </li>
  <li><a href="#sekenario">Sekenario</a></li>
  <li><a href="#pemecahan-masalah">Pemecahan Masalah</a>
    <ul>
      <li><a href="#pemasangan-shrine">Pemasangan Shrine</a></li>
      <li><a href="#pemasangan-image-processing">Pemasangan Image Processing</a></li>
      <li><a href="#konfigurasi-initializer-shrine">Konfigurasi Initializer Shrine</a></li>
      <li><a href="#models">Models</a></li>
      <li><a href="#controller">Controller</a></li>
      <li><a href="#views">Views</a></li>
    </ul>
  </li>
  <li><a href="#tambahan">Tambahan</a></li>
  <li><a href="#pesan-penulis">Pesan Penulis</a></li>
  <li><a href="#referensi">Referensi</a></li>
</ul>

  </div>
</div>


</aside>

        </div>
      </article>

      <article class="post">
        <div class="post-body">
          <div class="doa-awal noselect">
<p><img src="/assets/img/logo/logo_doa_awal.svg" alt="بسم الله الرحمن الرحيم" style="height:40px" align="right"></p>
<div style="clear:both;"></div>
</div>

        </div>
        <div class="markdown-body highlight">

          <!-- The Modal -->
<div class="modal">
  <img class="modal-content">
</div>


          <p><!-- BANNER OF THE POST -->
<!-- <img class="post&#45;body&#45;img" src="/assets/img/logo/logo_blank_banner.svg" data&#45;echo="#" alt="banner"> -->

<h1 id="prerequisite">Prerequisite</h1>

<p><code class="language-plaintext highlighter-rouge">Ruby 2.6.3</code> <code class="language-plaintext highlighter-rouge">Rails 5.2.3</code> <code class="language-plaintext highlighter-rouge">PostgreSQL 11.5</code></p>

<h1 id="prakata">Prakata</h1>

<p>Pada catatan kali ini saya akan mendokumentasikan proses implementasi image processing dengan Shrine gem pada aplikasi Ruby on Rails.</p>

<h2 id="shrine-itu-apa-yaa">Shrine itu apa yaa?</h2>

<p>Definisi sederhananya, Shrine adalah <em>file attachment toolkit</em> untuk aplikasi Ruby.</p>

<p>Aplikasi Ruby artinya Shrine tidak hanya dapat digunakan oleh aplikasi yang dibuat dengan <em>Ruby web framework</em> seperti Ruby on Rails, melainkan dapat pula digunakan pada <em>Ruby web framework</em> yang lain seperti Sinatra, Hanami, Roda, Cuba, Grape.</p>

<h2 id="kenapa-memilih-menggunakan-shrine">Kenapa memilih menggunakan Shrine?</h2>

<p>Shrine memiliki beberapa keuntungan diantaranya:</p>

<ol>
  <li>Modular design, dimana kita dapat memilih fungsi apa yang akan kita pakai cukup dengan menggunakan <em>plugin</em></li>
  <li>Memory friendly, streming upload dan download menjadi tidak masalah, meskipun dengan file berukuran besar</li>
  <li>Cloud storage, dukungan penyimpanan files yang berada di local disk, AWS S3, Google Cloud, Cloudinary dan lainnya</li>
  <li>Persistence integrations, bekerja dengan baik pada Sequel, ActiveRecord, ROM, Hanami dan Mongoid serta lainnya</li>
  <li>Flexible processing, mengenerate thumbnail eagerly atau onthe-fly dengan menggunakan imageMagick atau libvips</li>
  <li><a href="https://github.com/shrinerb/shrine" target="_blank">dst</a></li>
</ol>

<p><br />
Nah, pada catatan kali ini, saya akan membahas spesifik mengenai poin ke 5, <strong>Flexible processing</strong> atau lebih khusus ke <strong>File processing</strong>, atau lebih khusus lagi adalah <strong>Image Processing</strong>  yang akan digunakan untuk menggenerate <em>set of thumbnails</em>, atau dalam kata lain <em>image derivatives</em> (turunan gambar) dari gambar dengan ukuran asli yang diupload oleh user.</p>

<h1 id="sekenario">Sekenario</h1>

<p>Misal, pada Web aplikasi yang saya buat, saya mengizinkan user untuk dapat mengupload gambar (<em>image</em>).</p>

<p>Namun, ternyata pengguna mengupload gambar dengan ukuran yang besar-besar, tentunya hal ini akan berpengaruh ke page load dari halaman web aplikasi kita.</p>

<p>Untuk mengakali ini, saya memanfaatkan fungsi <em>image processing</em> yang dapat dikonfigurasi di dalam Shrine untuk menggenerate <em>set of thumbnails</em> sesuai kebutuhan, misal dalam 3 ukuran (small, medium dan large).</p>

<h1 id="pemecahan-masalah">Pemecahan Masalah</h1>

<h2 id="pemasangan-shrine">Pemasangan Shrine</h2>

<p>Saya sudah memasang Shrine ke dalam Gemfile aplikasi saya.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>Gemfile</code></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="c1"># ...</span>
<span class="c1"># ...</span>
<span class="n">gem</span> <span class="s2">"shrine"</span><span class="p">,</span> <span class="s2">"~&gt; 3.0"</span>
</pre></td></tr></tbody></table></code></pre></figure>

<h2 id="pemasangan-image-processing">Pemasangan Image Processing</h2>

<p>Selanjutnya, saya akan memasang dependensi untuk Shrine dapat melakukan image procesing, yaitu ImageMagick.</p>

<p>Pada catatan kali ini saya tidak menjelaskan mengenai penggunaan libvips.</p>

<p><strong>Pada Arch Linux</strong></p>

<pre><span class="cmd">$ </span><b>sudo pacman -S imagemagick</b><br /></pre>

<p>Untuk distribusi yang lain, silahkan mencari paket ImageMagick yang tersedia pada repository distro masing-masing.</p>

<p>Selanjutnya tambahkan <code class="language-plaintext highlighter-rouge">image_processing</code> pada Gemfile.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>Gemfile</code></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="c1"># ...</span>
<span class="c1"># ...</span>
<span class="n">gem</span> <span class="s1">'image_processing'</span><span class="p">,</span> <span class="s1">'~&gt; 1.8'</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Install gem yang baru saja kita pasang.</p>

<pre><span class="cmd">$ </span><b>bundle install</b><br /></pre>

<h2 id="konfigurasi-initializer-shrine">Konfigurasi Initializer Shrine</h2>

<p>Tambahkan plugin <strong>derivatives</strong> pada Shrine initializer.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>config/initializers/shrine.rb</code></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="c1"># ...</span>
<span class="c1"># ...</span>
<span class="c1"># ...</span>
 
<span class="no">Shrine</span><span class="p">.</span><span class="nf">plugin</span> <span class="o">...</span>
<span class="no">Shrine</span><span class="p">.</span><span class="nf">plugin</span> <span class="o">...</span>
<span class="no">Shrine</span><span class="p">.</span><span class="nf">plugin</span> <span class="o">...</span>
<span class="no">Shrine</span><span class="p">.</span><span class="nf">plugin</span> <span class="ss">:derivatives</span>
<span class="no">Shrine</span><span class="p">.</span><span class="nf">plugin</span> <span class="ss">:default_url</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Saya juga menambahkan plugin <strong>default_url</strong> agar image yang belum memiliki turunan, dapat menggunakan original image.</p>

<h2 id="models">Models</h2>

<p>Selanjutnya saya akan menambahkan fungsi untuk <em>eager processing</em> atau <em>derivatives processing</em> pada model image uploader.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>app/models/image_uploader.rb</code></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="code"><pre><span class="nb">require</span> <span class="s2">"image_processing/mini_magick"</span>

<span class="k">class</span> <span class="nc">ImageUploader</span> <span class="o">&lt;</span> <span class="no">Shrine</span>
  <span class="c1"># Image validation</span>
  <span class="no">Attacher</span><span class="p">.</span><span class="nf">validate</span> <span class="k">do</span>
    <span class="n">validate_max_size</span> <span class="mi">2</span><span class="p">.</span><span class="nf">megabyte</span><span class="p">,</span> <span class="ss">message: </span><span class="s2">"is too large (max is 2 MB)"</span>
    <span class="n">validate_mime_type_inclusion</span> <span class="p">[</span><span class="s1">'image/jpg'</span><span class="p">,</span> <span class="s1">'image/jpeg'</span><span class="p">,</span> <span class="s1">'image/png'</span><span class="p">]</span>
  <span class="k">end</span>

  <span class="c1"># Eager processing / derivatives processing</span>
  <span class="no">Attacher</span><span class="p">.</span><span class="nf">derivatives</span> <span class="k">do</span> <span class="o">|</span><span class="n">original</span><span class="o">|</span>
    <span class="n">magick</span> <span class="o">=</span> <span class="no">ImageProcessing</span><span class="o">::</span><span class="no">MiniMagick</span><span class="p">.</span><span class="nf">source</span><span class="p">(</span><span class="n">original</span><span class="p">).</span><span class="nf">saver</span><span class="p">(</span><span class="ss">quality: </span><span class="mi">90</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="ss">large:  </span><span class="n">magick</span><span class="p">.</span><span class="nf">resize_to_limit!</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">800</span><span class="p">),</span>
      <span class="ss">medium: </span><span class="n">magick</span><span class="p">.</span><span class="nf">resize_to_limit!</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span>
      <span class="ss">small:  </span><span class="n">magick</span><span class="p">.</span><span class="nf">resize_to_limit!</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">300</span><span class="p">),</span>
    <span class="p">}</span>
  <span class="k">end</span>

  <span class="c1"># Fallback to original</span>
  <span class="no">Attacher</span><span class="p">.</span><span class="nf">default_url</span> <span class="k">do</span> <span class="o">|</span><span class="ss">derivative: </span><span class="kp">nil</span><span class="p">,</span> <span class="o">**|</span>
    <span class="n">file</span><span class="o">&amp;</span><span class="p">.</span><span class="nf">url</span> <span class="k">if</span> <span class="n">derivative</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Saya rasa, pada blok <em>eager processing / derivatives processing</em> sudah dapat dipahami yaa.</p>

<p>Kalau ingin memodifikasi ukurannya, dapat dilakukan pada blok tersebut.</p>

<p>Saye memilih menggunakan ImageMagick sebagai backend processing karena lebih familiar.</p>

<p>Namun, saya sempat membaca kalau libvips dapat memproses lebih ringan dan lebih cepat. Saya akan coba pada kesempatan yang lain.</p>

<p>Model <code class="language-plaintext highlighter-rouge">image_uploader.rb</code> ini tentunya akan dipanggil pada model-model yang memiliki field <code class="language-plaintext highlighter-rouge">image_data:text</code> atau dengan nama yang lain namun berakhiran <code class="language-plaintext highlighter-rouge">_data:text</code>, caranya dengan menambahkan include seperti di bawah ini.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>app/models/nama_model.rb</code></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">NamaModel</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="c1"># ...</span>
  <span class="c1"># ...</span>

  <span class="c1"># Contoh dengan field image_data</span>
  <span class="kp">include</span> <span class="no">ImageUploader</span><span class="o">::</span><span class="no">Attachment</span><span class="p">(</span><span class="ss">:image</span><span class="p">)</span>
  <span class="c1"># Atau, dengan nama field yang berbeda</span>
  <span class="kp">include</span> <span class="no">ImageUploader</span><span class="o">::</span><span class="no">Attachment</span><span class="p">(</span><span class="ss">:header_image</span><span class="p">)</span>

  <span class="c1"># ...</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></figure>

<h2 id="controller">Controller</h2>

<p>Selanjutnya, pada controller yang menggunakan image uploader, saya akan menambahkan method <code class="language-plaintext highlighter-rouge">.image_derivatives!</code>.</p>

<p>Misal, saya memiliki posts controller.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>app/controllers/admin/posts_controller.rb</code></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">Admin</span><span class="o">::</span><span class="no">PostsController</span> <span class="o">&lt;</span> <span class="no">AdminsController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@post</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@post</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">post_params</span><span class="p">)</span>
    <span class="c1"># Calls derivatives processor</span>
    <span class="vi">@post</span><span class="p">.</span><span class="nf">image_derivatives!</span> <span class="k">if</span> <span class="vi">@post</span><span class="p">.</span><span class="nf">image</span><span class="p">.</span><span class="nf">present?</span>
    <span class="k">if</span> <span class="vi">@post</span><span class="p">.</span><span class="nf">save</span>
      <span class="n">redirect_to</span> <span class="n">admin_post_path</span><span class="p">(</span><span class="vi">@post</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:new</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">edit</span>
    <span class="vi">@post</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@post</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="k">if</span> <span class="vi">@post</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">post_params</span><span class="p">)</span>
      <span class="c1"># Calls derivatives processor</span>
      <span class="vi">@post</span><span class="p">.</span><span class="nf">image_derivatives!</span> <span class="k">if</span> <span class="vi">@post</span><span class="p">.</span><span class="nf">image</span><span class="p">.</span><span class="nf">present?</span>
      <span class="vi">@post</span><span class="p">.</span><span class="nf">save</span>
      <span class="n">redirect_to</span> <span class="n">admin_post_path</span><span class="p">(</span><span class="vi">@post</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:edit</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">delete_image_attachment</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">post_params</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:post</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:content</span><span class="p">,</span> <span class="ss">:image</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p><strong>Gimana kalau field <code class="language-plaintext highlighter-rouge">image_data</code> berada pada tabel yang berelasi?</strong></p>

<div class="highlight-caption"><span class="label">FILE</span><code>app/controllers/admin/experiences_controller.rb</code></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">Admin</span><span class="o">::</span><span class="no">ExperiencesController</span> <span class="o">&lt;</span> <span class="no">AdminsController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@experience</span> <span class="o">=</span> <span class="no">Experience</span><span class="p">.</span><span class="nf">new</span>
    <span class="vi">@experience</span><span class="p">.</span><span class="nf">build_photo</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@experience</span> <span class="o">=</span> <span class="no">Experience</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">experience_params</span><span class="p">)</span>
    <span class="c1"># memanggil attribute image_data yang ada pada tabel photos</span>
    <span class="vi">@experience</span><span class="p">.</span><span class="nf">photo</span><span class="p">.</span><span class="nf">image_experience_derivatives!</span> <span class="k">if</span> <span class="vi">@experience</span><span class="p">.</span><span class="nf">photo</span><span class="p">.</span><span class="nf">image_experience</span><span class="p">.</span><span class="nf">present?</span>

    <span class="k">if</span> <span class="vi">@experience</span><span class="p">.</span><span class="nf">save</span>
      <span class="n">redirect_to</span> <span class="n">admin_experience_path</span><span class="p">(</span><span class="vi">@experience</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="vi">@experience</span><span class="p">.</span><span class="nf">build_photo</span>
      <span class="n">render</span> <span class="ss">:new</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">edit</span>
    <span class="vi">@experience</span> <span class="o">=</span> <span class="no">Experience</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@experience</span> <span class="o">=</span> <span class="no">Experience</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>

    <span class="k">if</span> <span class="vi">@experience</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">experience_params</span><span class="p">)</span>
      <span class="c1"># memanggil attribute image_data yang ada pada tabel photos</span>
      <span class="vi">@experience</span><span class="p">.</span><span class="nf">photo</span><span class="p">.</span><span class="nf">image_experience_derivatives!</span> <span class="k">if</span> <span class="vi">@experience</span><span class="p">.</span><span class="nf">photo</span><span class="p">.</span><span class="nf">image_experience</span><span class="p">.</span><span class="nf">present?</span>
      <span class="vi">@experience</span><span class="p">.</span><span class="nf">save</span>
      <span class="n">redirect_to</span> <span class="n">admin_experience_path</span><span class="p">(</span><span class="vi">@experience</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:edit</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">experience_params</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:experience</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></figure>

<h2 id="views">Views</h2>

<p>Setelah gambar selesai diupload, gambar akan disimpan pada <code class="language-plaintext highlighter-rouge">image_data</code> atau nama apa saja <code class="language-plaintext highlighter-rouge">&lt;attachment&gt;_data</code> dalam catatan saya ini, berupa gambar.</p>

<p>Sekarang cara memanggilnya pada view template.</p>

<p>Perhatikan bagian <code class="language-plaintext highlighter-rouge">image_tag</code>.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>app/views/public/posts/index.html.erb</code></div>

<figure class="highlight"><pre><code class="language-eruby" data-lang="eruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="code"><pre><span class="c">&lt;!-- Post list --&gt;</span>
<span class="cp">&lt;%</span> <span class="vi">@posts</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-3"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">public_post_path</span><span class="p">(</span><span class="n">post</span><span class="p">)</span> <span class="k">do</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">image_tag</span> <span class="p">(</span><span class="n">post</span><span class="p">.</span><span class="nf">image</span><span class="p">.</span><span class="nf">present?</span> <span class="p">?</span> <span class="n">post</span><span class="p">.</span><span class="nf">image_url</span><span class="p">(:</span><span class="n">small</span><span class="p">)</span> <span class="p">:</span> <span class="s2">"img-default.jpg"</span><span class="p">),</span> <span class="ss">class: </span><span class="s2">"w-100 h-100"</span> <span class="cp">%&gt;</span>
      <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-9"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"text-normal"</span><span class="nt">&gt;</span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="p">.</span><span class="nf">created_at</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%B %e, %Y"</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/span&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">public_post_path</span><span class="p">(</span><span class="n">post</span><span class="p">)</span> <span class="k">do</span> <span class="cp">%&gt;</span>
        <span class="nt">&lt;h6&gt;</span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="p">.</span><span class="nf">title</span><span class="p">.</span><span class="nf">titleize</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h6&gt;</span>
      <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"text-normal"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%</span> <span class="n">html</span> <span class="o">=</span> <span class="n">post</span><span class="p">.</span><span class="nf">content</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">strip_tags</span><span class="p">(</span><span class="n">html</span><span class="p">).</span><span class="nf">truncate</span><span class="p">(</span><span class="mi">150</span><span class="p">)</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"more.."</span><span class="p">,</span> <span class="n">public_post_path</span><span class="p">(</span><span class="n">post</span><span class="p">),</span> <span class="ss">class: </span><span class="s2">"text-primary"</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="c">&lt;!-- END Post list --&gt;</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Saya menggunakan bentuk <code class="language-plaintext highlighter-rouge">image_tag</code> seperti ini,</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">image_tag</span> <span class="p">(</span><span class="n">post</span><span class="p">.</span><span class="nf">image</span><span class="p">.</span><span class="nf">present?</span> <span class="p">?</span> <span class="n">post</span><span class="p">.</span><span class="nf">image_url</span><span class="p">(:</span><span class="n">small</span><span class="p">)</span> <span class="p">:</span> <span class="s2">"img-default.jpg"</span><span class="p">)</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Terlihat bahwa saya menggunakan pengkondisian satu baris.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Apabila image.present?
Bernilai Benar, maka tampilkan image_url(:small)
Bernilai Salah, maka tampilkan img-default.jpg
</code></pre></div></div>

<p>Saya sudah menambahkan plugin <strong>default_url</strong> pada Shrine initializer, yang berguna untuk, memberikan <em>fallback</em> image ke original image, apabila post tersebut, belum memiliki gambar yang sudah di derivatives (diturunkan).</p>

<p>Bisa saja, tidak perlu menambahkan plugin <strong>default_url</strong>, namun pada <code class="language-plaintext highlighter-rouge">image_tag</code> akan menjadi 3 kondisi seperti ini,</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">image_tag</span> <span class="p">(</span><span class="n">post</span><span class="p">.</span><span class="nf">image_url</span><span class="p">(</span><span class="ss">:small</span><span class="p">)</span> <span class="o">||</span> <span class="n">post</span><span class="p">.</span><span class="nf">image_url</span> <span class="o">||</span> <span class="s2">"img-default.jpg"</span><span class="p">)</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Atau teman-teman dapat pula membuat view helper sendiri untuk menghandlenya.</p>

<p><br />
Nah, contoh blok kode di atas adalah untuk membuat tampilan thumbnail dari artikel list yang ad di posts#index. Karena itu, saya menggunakan ukuran <code class="language-plaintext highlighter-rouge">:small</code>.</p>

<p>Berdasarkan image turunan yang saya definikan di dalam model image_uploader, terdapat 3 ukuran, <code class="language-plaintext highlighter-rouge">:small</code>, <code class="language-plaintext highlighter-rouge">:medium</code>, dan <code class="language-plaintext highlighter-rouge">:large</code>.</p>

<p>Tinggal dikondisikan saja, ukuran-ukuran mana saja yang akan digunakan pada template.</p>

<p>Misal pada bagian detail artikel, saya menggunakan ukuran <code class="language-plaintext highlighter-rouge">:medium</code>. Lalu apabila gambar diklik, gambar akan menampilkan ukuran <code class="language-plaintext highlighter-rouge">:large</code>.</p>

<h1 id="tambahan">Tambahan</h1>

<p>Misalkan, aplikasi yang kita buat sudah terdapat gambar-gambar yang sudah diupload.</p>

<p><strong>Bagaimanakan kita dapat membuat gambar turunan dari semua gambar yang sudah terlanjur berada di dalam server?</strong></p>

<p>Nah, tinggal dibuatkan saja <em>script</em> yang akan menjalankan proses tersebut.</p>

<p>Saya akan buat direktori baru bernama <code class="language-plaintext highlighter-rouge">script</code> dan membuat file baru bernama <code class="language-plaintext highlighter-rouge">derivatives_bomb.rb</code>.</p>

<p>Namanya sengaja saya buat keren. Biar sedikit memprovokasi.</p>

<div class="highlight-caption"><span class="label">FILE</span><code>script/derivatives_bomb.rb</code></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
</pre></td><td class="code"><pre><span class="c1"># WHAT IS THIS?</span>
<span class="c1"># This script is for adding derivatives in existing photos purposes</span>
<span class="c1"># Existing photos means, photos that had been on server before image</span>
<span class="c1"># derivatives had implemented</span>
<span class="c1"># If there are any questions about this script, Please take a look on</span>
<span class="c1"># https://shrinerb.com/docs/changing-derivatives</span>
<span class="c1">#</span>
<span class="c1"># HOW TO USE?</span>
<span class="c1"># Run this script on Terminal.</span>
<span class="c1"># $ rails runner scripts/derivatives_bomb.rb</span>

<span class="c1"># Model-model yang memiliki image_data di dalam fieldnya</span>
<span class="n">normal_targets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'User'</span><span class="p">,</span> <span class="s1">'Post'</span><span class="p">]</span>
<span class="n">normal_targets</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">model</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="se">\n</span><span class="si">#{</span><span class="n">model</span><span class="si">}</span><span class="s2">s image derivating process starting..."</span>
  <span class="n">progress</span> <span class="o">=</span> <span class="s1">'Progress ['</span>
  <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="p">(</span><span class="n">model</span><span class="p">.</span><span class="nf">constantize</span><span class="p">).</span><span class="nf">find_each</span> <span class="k">do</span> <span class="o">|</span><span class="n">photo</span><span class="o">|</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">0</span>
      <span class="n">progress</span> <span class="o">&lt;&lt;</span> <span class="s2">"|"</span>
      <span class="nb">print</span> <span class="s2">"</span><span class="se">\r</span><span class="s2">"</span>
      <span class="nb">print</span> <span class="n">progress</span> <span class="o">+</span> <span class="s2">" </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2"> / </span><span class="si">#{</span><span class="p">(</span><span class="n">model</span><span class="p">.</span><span class="nf">constantize</span><span class="p">).</span><span class="nf">all</span><span class="p">.</span><span class="nf">size</span><span class="si">}</span><span class="s2"> %]"</span>
      <span class="vg">$stdout</span><span class="p">.</span><span class="nf">flush</span>
      <span class="nb">sleep</span> <span class="mf">0.05</span>
    <span class="k">end</span>

    <span class="n">attacher</span> <span class="o">=</span> <span class="n">photo</span><span class="p">.</span><span class="nf">image_attacher</span>
    <span class="k">next</span> <span class="k">unless</span> <span class="n">attacher</span><span class="p">.</span><span class="nf">stored?</span>
    <span class="n">attacher</span><span class="p">.</span><span class="nf">create_derivatives</span>
    <span class="k">begin</span>
      <span class="n">attacher</span><span class="p">.</span><span class="nf">atomic_persist</span>
    <span class="k">rescue</span> <span class="no">Shrine</span><span class="o">::</span><span class="no">AttachmentChanged</span><span class="p">,</span>
      <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">RecordNotFound</span>
      <span class="n">attacher</span><span class="p">.</span><span class="nf">delete_derivatives</span>
    <span class="k">end</span>
  <span class="k">end</span>
  <span class="nb">puts</span> <span class="s2">" DONE!"</span>
<span class="k">end</span>

<span class="c1"># Model yang field image_data nya berada pada tabel yang berelasi</span>
<span class="c1"># Misal, tabel experiences yang menyimpan data foto pada tabel photos</span>
<span class="nb">puts</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">Experiences image derivating process starting..."</span>
<span class="n">progress</span> <span class="o">=</span> <span class="s1">'Progress ['</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="no">Experience</span><span class="p">.</span><span class="nf">find_each</span> <span class="k">do</span> <span class="o">|</span><span class="n">exp</span><span class="o">|</span>
  <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="n">progress</span> <span class="o">&lt;&lt;</span> <span class="s2">"|"</span>
    <span class="nb">print</span> <span class="s2">"</span><span class="se">\r</span><span class="s2">"</span>
    <span class="nb">print</span> <span class="n">progress</span> <span class="o">+</span> <span class="s2">" </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2"> / </span><span class="si">#{</span><span class="no">Experience</span><span class="p">.</span><span class="nf">all</span><span class="p">.</span><span class="nf">size</span><span class="si">}</span><span class="s2"> %]"</span>
    <span class="vg">$stdout</span><span class="p">.</span><span class="nf">flush</span>
    <span class="nb">sleep</span> <span class="mf">0.05</span>
  <span class="k">end</span>

  <span class="c1"># photo_image field</span>
  <span class="n">attacher</span> <span class="o">=</span> <span class="n">exp</span><span class="p">.</span><span class="nf">photo</span><span class="p">.</span><span class="nf">photo_experience_attacher</span>
  <span class="k">next</span> <span class="k">unless</span> <span class="n">attacher</span><span class="p">.</span><span class="nf">stored?</span>
  <span class="n">attacher</span><span class="p">.</span><span class="nf">create_derivatives</span>
  <span class="k">begin</span>
    <span class="n">attacher</span><span class="p">.</span><span class="nf">atomic_persist</span>
  <span class="k">rescue</span> <span class="no">Shrine</span><span class="o">::</span><span class="no">AttachmentChanged</span><span class="p">,</span>
    <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">RecordNotFound</span>
    <span class="n">attacher</span><span class="p">.</span><span class="nf">delete_derivatives</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="nb">puts</span> <span class="s2">" DONE!"</span>

<span class="nb">puts</span> <span class="s2">"""
d8888b.  .d88b.  d8b   db d88888b db
88  `8D .8P  Y8. 888o  88 88'     88
88   88 88    88 88V8o 88 88ooooo YP
88   88 88    88 88 V8o88 88~~~~~
88  .8D `8b  d8' 88  V888 88.     db
Y8888D'  `Y88P'  VP   V8P Y88888P YP
"""</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Cara menjalankannya sangat mudah,</p>

<pre><span class="cmd">$ </span><b>rails runner script/derivatives_bomb.rb</b><br /></pre>

<p>Tunggu prosesnya sampai selesai.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Running via Spring preloader in process 135133

Users image derivating process starting...
Progress [|||||||||| 10 / 10 %] DONE!

Posts image derivating process starting...
Progress [|||||||||||||||||||| 20/20 %] DONE!

Experiences image derivating process starting...
Progress [|||||||||||||||||||||||||||||| 30 / 30 %] DONE!

d8888b.  .d88b.  d8b   db d88888b db
88  `8D .8P  Y8. 888o  88 88'     88
88   88 88    88 88V8o 88 88ooooo YP
88   88 88    88 88 V8o88 88~~~~~
88  .8D `8b  d8' 88  V888 88.     db
Y8888D'  `Y88P'  VP   V8P Y88888P YP
</code></pre></div></div>

<p>Ahahaha.</p>

<p>Yah, bagaimanapun script ini masih jauh dari sempurna. Masih remah-remah biskuit selamet.</p>

<p>Namun, cukup berguna bagi saya.</p>

<h1 id="pesan-penulis">Pesan Penulis</h1>

<p>Catatan ini masih jauh dari kata sempurna.</p>

<p>Karena keterbatasan waktu, ilmu dan pemahaman yang saya miliki.</p>

<p>Apabila terdapat kendala dalam mengaplikasikan Shrine image processing ini, teman-teman dapat merujuk pada sumber-sumber dokumentasi resmi yang saya sertakan di bawah.</p>

<p>Sepertinya cukup segini saja.</p>

<p>Mudah-mudahan dapat bermanfaat bagi teman-teman yang memerlukan.</p>

<p>Terima kasih.</p>

<p>(^_^)</p>

<h1 id="referensi">Referensi</h1>

<ol>
  <li>
    <p><a href="https://github.com/shrinerb/shrine" target="_blank">github.com/shrinerb/shrine</a>
<br />Diakses tanggal: 2020/02/19</p>
  </li>
  <li>
    <p><a href="https://github.com/janko/image_processing" target="_blank">github.com/janko/image_processing</a>
<br />Diakses tanggal: 2020/02/19</p>
  </li>
  <li>
    <p><a href="https://shrinerb.com/docs/processing" target="_blank">shrinerb.com/docs/processing</a>
<br />Diakses tanggal: 2020/02/19</p>
  </li>
  <li>
    <p><a href="https://shrinerb.com/docs/changing-derivatives" target="_blank">shrinerb.com/docs/changing-derivatives</a>
<br />Diakses tanggal: 2020/02/19</p>
  </li>
</ol>
</p>

          <!-- wip -->
          
            <br>
          

          <!-- License -->
          
            <div style="text-align:center; margin:0 0 10px 0;"></div>
            
              <div class="noselect">
<h1 style="font-size:2em;">Lisensi</h1>
<div class="ccbysa-img noselect"><img class="ccbysa-img-img" style="margin-top: 5px;" src="/assets/img/logo/cc-by-nc-sa.png" alt="logo_cc-by-nc-sa"/></div><!-- ccbysa -->
<div class="ccbysa-text noselect">
Tulisan ini dilisensikan dengan :<br>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.id" target="_blank">Atribusi-NonKomersial-BerbagiSerupa 4.0 Internasional (CC BY-NC-SA 4.0)</a>
</div><!-- ccbysa-text -->
</div>

            
          

          <div style="clear:both;"></div>

          <!-- Penulis -->
          
            <div style="text-align:center; margin:0 0 10px 0;"></div>

            

            
              <div class="noselect">
  <h1 style="font-size:2em;">Penulis</h1>
  
  
    
      <div class="penulis-img">
        <img style="margin:0 auto;border-radius:50%;" src="https://github.com/bandithijo.png?size=200" alt="bandithijo" onerror="imgError(this);">
      </div><!-- penulis-img -->

      <div class="penulis-text">
        <p><p><b>BanditHijo</b> adalah nama pena saya –meminjam istilah keren dari para penulis. Teman-teman menyebut saya sebagai GNU/Linux Enthusiast. Saya memang gemar mengutak-atik sistem operasi ini. Sistem operasi ini memberikan saya kebebasan untuk mengekspresikan ide-ide dalam membantu menyelesaikan pekerjaan saya sehari-hari.</p></p>
        <p style="text-align:right;">- <b>Rizqi Nur Assyaufi</b></p>
      </div><!-- penulis-text -->
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</div>

            
          

          <div style="clear:both;"></div>

          

        </div><!-- markdown-body -->
      </article>

      <article>
        <div class="post-body-sidebar">
          <aside class="sidebar noselect" id="sidebar-tail">

    <div class="sidebar-body">
  <h1 style="font-size:1.5em;border-bottom:1px dashed #9E9E9E;">
    <img src="/assets/img/logo/logo_terbaru.svg">Tulisan Terbaru
  </h1>
  <div class="toc">
  <ul>
  
  
    
      <li><a href="/blog/mudah-mengenkripsi-file-dokumen-dengan-gnupg">Mudah Mengenkripsi File dan Dokumen dengan GnuPG (GPG)</a></li>
    
  
    
      <li><a href="/blog/dmenu-websearch-jalan-pintas-pencari-kata-yang-praktis">dmenu-websearch, Jalan Pintas Pencari Kata yang Praktis</a></li>
    
  
    
      <li><a href="/blog/sxiv-simple-x-image-viewer-yang-praktis">sxiv, Simple X Image Viewer (sxiv) yang Praktis namun Powerfull</a></li>
    
  
    
      <li><a href="/blog/presentation-mode-dengan-dpms-di-linux">Membuat Presentation Mode tanpa XFCE4 Power Manager di GNU/Linux (Bonus! dmenu-presentationmode)</a></li>
    
  
    
      <li><a href="/blog/bluetooth-headset-battery-status">Bluetooth Headset Battery Status</a></li>
    
  
    
      <li><a href="/blog/berdonasi-ke-project-open-source-yang-digunakan">Hanya dengan 100 Ribu Rupiah, Bisa Berdonasi ke 6 Open Source Project!</a></li>
    
  
    
      <li><a href="/blog/menjalankan-distro-linux-lain-dengan-distrobox-di-fedora-linux">Menjalankan Distro Linux yang Lain dengan Distrobox di Fedora Linux</a></li>
    
  
    
      <li><a href="/blog/datetimepicker-dengan-tempusdominus-bootstrap-4-dan-simple-form-di-rails">Date Time Picker dengan Tempus Dominus Bootstrap 4 dan simple_form di Ruby on Rails 6</a></li>
    
  
    
      <li><a href="/blog/datetimepicker-dengan-tempusdominus-bootstrap-4-di-rails">Date Time Picker dengan Tempus Dominus Bootstrap 4 di Ruby on Rails 6</a></li>
    
  
    
      <li><a href="/blog/lazygit-terminal-user-interface-untuk-git">Lazygit, Terminal User Interface untuk Git Commands</a></li>
    
  
  </ul>
  </div>
  <div style="margin:10px 0 10px 0;border-bottom:1px dashed #9E9E9E;"></div>
  <p style="text-align:left;"><a style="border-bottom:0;" href="/blog/"><b>Selengkapnya >></b></a></p>
</div>

    <div class="sidebar-body">
  <h1 style="font-size:1.5em;border-bottom:1px dashed #9E9E9E;">
    <img src="/assets/img/logo/logo_tags.svg"><a style="color:#000;border-bottom:none;" href="/tags/">Tags</a>
  </h1>
  <div class="toc">
    
    
      
        
        <span class="tags"><a href="/tags/#android">Android</a></span>
      
        
        <span class="tags"><a href="/tags/#arch-linux">Arch Linux</a></span>
      
        
        <span class="tags"><a href="/tags/#artix-linux">Artix Linux</a></span>
      
        
        <span class="tags"><a href="/tags/#bootstrap">Bootstrap</a></span>
      
        
        <span class="tags"><a href="/tags/#container">Container</a></span>
      
        
        <span class="tags"><a href="/tags/#database">Database</a></span>
      
        
        <span class="tags"><a href="/tags/#docker">Docker</a></span>
      
        
        <span class="tags"><a href="/tags/#event">Event</a></span>
      
        
        <span class="tags"><a href="/tags/#fedora">Fedora</a></span>
      
        
        <span class="tags"><a href="/tags/#freebsd">FreeBSD</a></span>
      
        
        <span class="tags"><a href="/tags/#git">Git</a></span>
      
        
        <span class="tags"><a href="/tags/#heroku">Heroku</a></span>
      
        
        <span class="tags"><a href="/tags/#i3wm">I3WM</a></span>
      
        
        <span class="tags"><a href="/tags/#java">Java</a></span>
      
        
        <span class="tags"><a href="/tags/#javascript">Javascript</a></span>
      
        
        <span class="tags"><a href="/tags/#jekyll">Jekyll</a></span>
      
        
        <span class="tags"><a href="/tags/#kvm">KVM</a></span>
      
        
        <span class="tags"><a href="/tags/#mysql">MySQL</a></span>
      
        
        <span class="tags"><a href="/tags/#network">Network</a></span>
      
        
        <span class="tags"><a href="/tags/#osx">OSX</a></span>
      
        
        <span class="tags"><a href="/tags/#podman">Podman</a></span>
      
        
        <span class="tags"><a href="/tags/#postgresql">PostgreSQL</a></span>
      
        
        <span class="tags"><a href="/tags/#python">Python</a></span>
      
        
        <span class="tags"><a href="/tags/#qemu">Qemu</a></span>
      
        
        <span class="tags"><a href="/tags/#rspec">RSpec</a></span>
      
        
        <span class="tags"><a href="/tags/#rails">Rails</a></span>
      
        
        <span class="tags"><a href="/tags/#ruby">Ruby</a></span>
      
        
        <span class="tags"><a href="/tags/#script">Script</a></span>
      
        
        <span class="tags"><a href="/tags/#security">Security</a></span>
      
        
        <span class="tags"><a href="/tags/#terminal">Terminal</a></span>
      
        
        <span class="tags"><a href="/tags/#thinkpad">ThinkPad</a></span>
      
        
        <span class="tags"><a href="/tags/#tips">Tips</a></span>
      
        
        <span class="tags"><a href="/tags/#tools">Tools</a></span>
      
        
        <span class="tags"><a href="/tags/#ulasan">Ulasan</a></span>
      
        
        <span class="tags"><a href="/tags/#vim">Vim</a></span>
      
        
        <span class="tags"><a href="/tags/#virt-manager">Virt-Manager</a></span>
      
        
        <span class="tags"><a href="/tags/#wine">Wine</a></span>
      
        
        <span class="tags"><a href="/tags/#xfce">XFCE</a></span>
      
        
        <span class="tags"><a href="/tags/#jquery">jQuery</a></span>
      
        
        <span class="tags"><a href="/tags/#opensuse">openSUSE</a></span>
      
        
        <span class="tags"><a href="/tags/#ssh">ssh</a></span>
      
    
    
  </div><!-- toc -->
</div><!-- sidebar-body -->

    <div class="sidebar-body">
  <h1 style="font-size:1.5em;border-bottom:1px dashed #9E9E9E;margin-bottom:5px;">
    <img src="/assets/img/logo/logo_dotfriends.svg">dotFriends
  </h1>
  <!-- untuk random dotfriends list sebanyak 8 -->
  
  
    
        <p>+&nbsp;<a href="https://github.com/fikriomar16" target="_blank">Fikri Omar</a></p>
    
        <p>+&nbsp;<a href="https://bandithijo.github.io" target="_blank">bandithijo</a></p>
    
        <p>+&nbsp;<a href="https://agung-setiawan.com" target="_blank">agungsetiawan</a></p>
    
        <p>+&nbsp;<a href="https://raniaamina.id" target="_blank">Rania Amina</a></p>
    
        <p>+&nbsp;<a href="https://github.com/myugan" target="_blank">myugan</a></p>
    
  
  <p style="font-size:10px;color:#00603C;margin-top:12px;text-align:left;">*5 daftar blog di atas digenerate secara random</p>
  <div style="margin:10px 0 10px 0;border-bottom:1px dashed #9E9E9E;"></div>
  <p style="text-align:left;"><a style="border-bottom:0;" href="/dotfriends/"><b>Selengkapnya >></b></a></p>
</div>

    <div class="sidebar-body-rss"">
  <h1 style="border-bottom:1px dashed #ACA573;margin-bottom:5px;">
    <img src="/assets/img/logo/logo_bantuan.svg">Bantuan
  </h1>
   <p>Kebingungan dengan simbol-simbol yang terdapat pada halaman blog ini?</p>
   <p>Kamu dapat mempelajari bagaimana cara membaca setiap komponen yang ada di dalam blog, <a href="/bantuan/"><b>di sini</b></a>.</p>
</div>

    <div class="sidebar-body-rss">
  <h1 style="font-size:1.5em;border-bottom:1px dashed #ACA573;margin-bottom:5px;">
    <img src="/assets/img/logo/logo_rss.svg">Berlangganan RSS
  </h1>
  <p>Untuk dapat berlangganan catatan/post terbaru, kamu dapat mengklik tombol RSS yang terdapat di <a href="#footer"><b>footer</b></a>.</p>
  <p>Blog ini memiliki <del>dua</del> satu buah RSS feed, Blog dan <del>Vlog</del>.</p>
  <p>Apabila kamu mengklik tombol RSS yang ada pada halaman yang berkategori Blog, maka RSS feed url yang keluar adalah untuk kategori Blog, begitu pula sebaliknya untuk halaman Vlog.</p>
  <div style="margin:15px 0 10px 0;border-bottom:1px dashed #ACA573;"></div>
  <p>Belum tahu tentang RSS? Yuk, <a href="https://bandithijo.dev/blog/newsboat-rss-feed-reader"><b>ke sini</b></a></p>
</div>


</aside>

        </div>
      </article>

    </div><!-- container-edge-border -->
  </div><!-- main container -->
</section><!-- main -->


<footer id="footer" class="noselect">
  <div class="container">
    <div class="container-inner">
      <div class="footer-line">
        <p style="font-size:20px;"><a href="/"><strong>BanditHijo (R)-Chive</strong></a> &copy; 2012 - 2022</p>
        <p style="font-size:12px;margin-top:-35px;color:#404040;">
          Source code dan artikel-artikel ditulis menggunakan <span class="nobr"><a href="http://vim.org" target="_blank" rel="noreferrer" style="font-weight:bold;color:#404040;">Vim</a> text editor.</span><br>
          Semua elemen gambar dikerjakan menggunakan <span class="nobr"><a href="https://inkscape.org" target="_blank" rel="noreferrer" style="font-weight:bold;color:#404040;">Inkscape</a> dan <a href="https://gimp.org" target="_blank" rel="noreferrer" style="font-weight:bold;color:#404040;">GIMP</a>.</span><br>
          Menggunakan <a href="https://jekyllrb.com" target="_blank" rel="noreferrer" style="font-weight:bold;color:#404040;">Jekyll</a> sebagai Static Site Generator.<br>
          Dihosting menggunakan <a href="https://github.com/bandithijo/bandithijo.github.io" target="_blank" rel="noreferrer" style="font-weight:bold;color:#404040;">GitHub</a>.<br>
          Terakhir update: <b>23/09/2022</b>
        </p>
        <p class="footer-menu">
          <br>
          <a href="/contact/"><strong>Contact</strong></a> |&nbsp;
          <a href="https://twitter.com/bandithijo" target="_blank" rel="noreferrer"><strong>Twitter</strong></a> |&nbsp;
          <a rel="me" href="https://www.youtube.com/c/BanditHijo" target="_blank" rel="noreferrer"><strong>YouTube</strong></a> |&nbsp;
          <a rel="me" href="https://github.com/bandithijo" target="_blank" rel="noreferrer"><strong>GitHub</strong></a> |&nbsp;
          
            <a href="/feed/blog.xml" target="_blank"><strong>RSS</strong></a>
          
        </p>

        
        
        
        
        
        
        
        
        
        
        
        
        
        

        <div class="tech-i-used-desktop">
          <a href="https://jekyllrb.com" target="_blank" rel="noopener">
            <img class="footer-img-jekyll" src="/assets/img/logo/logo_jekyll.png">
          </a>
          <a href="https://www.ruby-lang.org" target="_blank" rel="noopener">
            <img class="footer-img-ruby" src="/assets/img/logo/logo_ruby.png">
          </a>
          <a href="https://netlify.app" target="_blank" rel="noopener">
            <img class="footer-img-netlify" src="/assets/img/logo/logo_netlify.png">
          </a>
          
          
          
          
          
          
        </div><!-- tech-i-used-desktop -->

        <div class="tech-i-used-mobile">
          
          
          
          
          
          
          
          
          
          <a href="https://netlify.app" target="_blank" rel="noopener" rel="noreferrer">
            <img class="footer-img-netlify-mobile" src="/assets/img/logo/logo_netlify_mobile.png">
          </a>
          <a href="https://www.ruby-lang.org" target="_blank" rel="noopener" rel="noreferrer">
            <img class="footer-img-ruby-mobile" src="/assets/img/logo/logo_ruby_mobile.png">
          </a>
          <a href="https://jekyllrb.com/" target="_blank" rel="noopener" rel="noreferrer">
            <img class="footer-img-jekyll-mobile" src="/assets/img/logo/logo_jekyll_mobile.png">
          </a>
        </div><!-- tech-i-used-mobile -->
      </div><!-- footer-line -->
    </div><!-- container-innner -->
  </div><!-- footer container -->
</footer>

<!-- site.git.build_version -->
<div class="tech-i-used-desktop" style="text-align:center;font-size:9px;color:#8F8879;margin: -5px 0 10px 0;">
  
</div>
<!-- END site.git.build_version -->

<script type="text/javascript" src="/assets/js/nav.js"></script>
<script type="text/javascript" src="/assets/js/lazyload.js"></script>
<script type="text/javascript" src="/assets/js/headings-permalink.js"></script>


<script type="text/javascript" src="/assets/js/aside.js"></script>


<script type="text/javascript" src="/assets/js/enlarge-image-modal.js"></script>




</body>
</html>
